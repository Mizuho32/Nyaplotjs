/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     uuid.js
//
//     Copyright (c) 2010-2012 Robert Kieffer
//     MIT License - http://opensource.org/licenses/mit-license.php

!function(t,n){t.Nyaplot=n()}(this,function(){var t,n,e;return function(r){function i(t,n){return _.call(t,n)}function a(t,n){var e,r,i,a,o,u,l,s,c,f,d,p=n&&n.split("/"),h=y.map,m=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(n){for(p=p.slice(0,p.length-1),t=t.split("/"),o=t.length-1,y.nodeIdCompat&&b.test(t[o])&&(t[o]=t[o].replace(b,"")),t=p.concat(t),c=0;c<t.length;c+=1)if(d=t[c],"."===d)t.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||m)&&h){for(e=t.split("/"),c=e.length;c>0;c-=1){if(r=e.slice(0,c).join("/"),p)for(f=p.length;f>0;f-=1)if(i=h[p.slice(0,f).join("/")],i&&(i=i[r])){a=i,u=c;break}if(a)break;!l&&m&&m[r]&&(l=m[r],s=c)}!a&&l&&(a=l,u=s),a&&(e.splice(0,u,a),t=e.join("/"))}return t}function o(t,n){return function(){return p.apply(r,w.call(arguments,0).concat([t,n]))}}function u(t){return function(n){return a(n,t)}}function l(t){return function(n){g[t]=n}}function s(t){if(i(v,t)){var n=v[t];delete v[t],x[t]=!0,d.apply(r,n)}if(!i(g,t)&&!i(x,t))throw new Error("No "+t);return g[t]}function c(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,p,h,m,g={},v={},y={},x={},_=Object.prototype.hasOwnProperty,w=[].slice,b=/\.js$/;h=function(t,n){var e,r=c(t),i=r[0];return t=r[1],i&&(i=a(i,n),e=s(i)),i?t=e&&e.normalize?e.normalize(t,u(n)):a(t,n):(t=a(t,n),r=c(t),i=r[0],t=r[1],i&&(e=s(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},m={require:function(t){return o(t)},exports:function(t){var n=g[t];return"undefined"!=typeof n?n:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:f(t)}}},d=function(t,n,e,a){var u,c,f,d,p,y,_=[],w=typeof e;if(a=a||t,"undefined"===w||"function"===w){for(n=!n.length&&e.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if(d=h(n[p],a),c=d.f,"require"===c)_[p]=m.require(t);else if("exports"===c)_[p]=m.exports(t),y=!0;else if("module"===c)u=_[p]=m.module(t);else if(i(g,c)||i(v,c)||i(x,c))_[p]=s(c);else{if(!d.p)throw new Error(t+" missing "+c);d.p.load(d.n,o(a,!0),l(c),{}),_[p]=g[c]}f=e?e.apply(g[t],_):void 0,t&&(u&&u.exports!==r&&u.exports!==g[t]?g[t]=u.exports:f===r&&y||(g[t]=f))}else t&&(g[t]=e)},t=n=p=function(t,n,e,i,a){if("string"==typeof t)return m[t]?m[t](n):s(h(t,n).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!n)return;n.splice?(t=n,n=e,e=null):t=r}return n=n||function(){},"function"==typeof e&&(e=i,i=a),i?d(r,t,n,e):setTimeout(function(){d(r,t,n,e)},4),p},p.config=function(t){return p(t)},t._defined=g,e=function(t,n,e){n.splice||(e=n,n=[]),i(g,t)||i(v,t)||(v[t]=[t,n,e])},e.amd={jQuery:!0}}(),e("../contrib/almond/almond",function(){}),function(){var t=this,n=t._,r={},i=Array.prototype,a=Object.prototype,o=Function.prototype,u=i.push,l=i.slice,s=i.concat,c=a.toString,f=a.hasOwnProperty,d=i.forEach,p=i.map,h=i.reduce,m=i.reduceRight,g=i.filter,v=i.every,y=i.some,x=i.indexOf,_=i.lastIndexOf,w=Array.isArray,b=Object.keys,k=o.bind,M=function(t){return t instanceof M?t:this instanceof M?void(this._wrapped=t):new M(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=M),exports._=M):t._=M,M.VERSION="1.6.0";var A=M.each=M.forEach=function(t,n,e){if(null==t)return t;if(d&&t.forEach===d)t.forEach(n,e);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(n.call(e,t[i],i,t)===r)return}else for(var o=M.keys(t),i=0,a=o.length;a>i;i++)if(n.call(e,t[o[i]],o[i],t)===r)return;return t};M.map=M.collect=function(t,n,e){var r=[];return null==t?r:p&&t.map===p?t.map(n,e):(A(t,function(t,i,a){r.push(n.call(e,t,i,a))}),r)};var D="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(n=M.bind(n,r)),i?t.reduce(n,e):t.reduce(n);if(A(t,function(t,a,o){i?e=n.call(r,e,t,a,o):(e=t,i=!0)}),!i)throw new TypeError(D);return e},M.reduceRight=M.foldr=function(t,n,e,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(n=M.bind(n,r)),i?t.reduceRight(n,e):t.reduceRight(n);var a=t.length;if(a!==+a){var o=M.keys(t);a=o.length}if(A(t,function(u,l,s){l=o?o[--a]:--a,i?e=n.call(r,e,t[l],l,s):(e=t[l],i=!0)}),!i)throw new TypeError(D);return e},M.find=M.detect=function(t,n,e){var r;return j(t,function(t,i,a){return n.call(e,t,i,a)?(r=t,!0):void 0}),r},M.filter=M.select=function(t,n,e){var r=[];return null==t?r:g&&t.filter===g?t.filter(n,e):(A(t,function(t,i,a){n.call(e,t,i,a)&&r.push(t)}),r)},M.reject=function(t,n,e){return M.filter(t,function(t,r,i){return!n.call(e,t,r,i)},e)},M.every=M.all=function(t,n,e){n||(n=M.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(n,e):(A(t,function(t,a,o){return(i=i&&n.call(e,t,a,o))?void 0:r}),!!i)};var j=M.some=M.any=function(t,n,e){n||(n=M.identity);var i=!1;return null==t?i:y&&t.some===y?t.some(n,e):(A(t,function(t,a,o){return i||(i=n.call(e,t,a,o))?r:void 0}),!!i)};M.contains=M.include=function(t,n){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(n):j(t,function(t){return t===n})},M.invoke=function(t,n){var e=l.call(arguments,2),r=M.isFunction(n);return M.map(t,function(t){return(r?n:t[n]).apply(t,e)})},M.pluck=function(t,n){return M.map(t,M.property(n))},M.where=function(t,n){return M.filter(t,M.matches(n))},M.findWhere=function(t,n){return M.find(t,M.matches(n))},M.max=function(t,n,e){if(!n&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return A(t,function(t,a,o){var u=n?n.call(e,t,a,o):t;u>i&&(r=t,i=u)}),r},M.min=function(t,n,e){if(!n&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return A(t,function(t,a,o){var u=n?n.call(e,t,a,o):t;i>u&&(r=t,i=u)}),r},M.shuffle=function(t){var n,e=0,r=[];return A(t,function(t){n=M.random(e++),r[e-1]=r[n],r[n]=t}),r},M.sample=function(t,n,e){return null==n||e?(t.length!==+t.length&&(t=M.values(t)),t[M.random(t.length-1)]):M.shuffle(t).slice(0,Math.max(0,n))};var O=function(t){return null==t?M.identity:M.isFunction(t)?t:M.property(t)};M.sortBy=function(t,n,e){return n=O(n),M.pluck(M.map(t,function(t,r,i){return{value:t,index:r,criteria:n.call(e,t,r,i)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var F=function(t){return function(n,e,r){var i={};return e=O(e),A(n,function(a,o){var u=e.call(r,a,o,n);t(i,u,a)}),i}};M.groupBy=F(function(t,n,e){M.has(t,n)?t[n].push(e):t[n]=[e]}),M.indexBy=F(function(t,n,e){t[n]=e}),M.countBy=F(function(t,n){M.has(t,n)?t[n]++:t[n]=1}),M.sortedIndex=function(t,n,e,r){e=O(e);for(var i=e.call(r,n),a=0,o=t.length;o>a;){var u=a+o>>>1;e.call(r,t[u])<i?a=u+1:o=u}return a},M.toArray=function(t){return t?M.isArray(t)?l.call(t):t.length===+t.length?M.map(t,M.identity):M.values(t):[]},M.size=function(t){return null==t?0:t.length===+t.length?t.length:M.keys(t).length},M.first=M.head=M.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:0>n?[]:l.call(t,0,n)},M.initial=function(t,n,e){return l.call(t,0,t.length-(null==n||e?1:n))},M.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:l.call(t,Math.max(t.length-n,0))},M.rest=M.tail=M.drop=function(t,n,e){return l.call(t,null==n||e?1:n)},M.compact=function(t){return M.filter(t,M.identity)};var S=function(t,n,e){return n&&M.every(t,M.isArray)?s.apply(e,t):(A(t,function(t){M.isArray(t)||M.isArguments(t)?n?u.apply(e,t):S(t,n,e):e.push(t)}),e)};M.flatten=function(t,n){return S(t,n,[])},M.without=function(t){return M.difference(t,l.call(arguments,1))},M.partition=function(t,n){var e=[],r=[];return A(t,function(t){(n(t)?e:r).push(t)}),[e,r]},M.uniq=M.unique=function(t,n,e,r){M.isFunction(n)&&(r=e,e=n,n=!1);var i=e?M.map(t,e,r):t,a=[],o=[];return A(i,function(e,r){(n?r&&o[o.length-1]===e:M.contains(o,e))||(o.push(e),a.push(t[r]))}),a},M.union=function(){return M.uniq(M.flatten(arguments,!0))},M.intersection=function(t){var n=l.call(arguments,1);return M.filter(M.uniq(t),function(t){return M.every(n,function(n){return M.contains(n,t)})})},M.difference=function(t){var n=s.apply(i,l.call(arguments,1));return M.filter(t,function(t){return!M.contains(n,t)})},M.zip=function(){for(var t=M.max(M.pluck(arguments,"length").concat(0)),n=new Array(t),e=0;t>e;e++)n[e]=M.pluck(arguments,""+e);return n},M.object=function(t,n){if(null==t)return{};for(var e={},r=0,i=t.length;i>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},M.indexOf=function(t,n,e){if(null==t)return-1;var r=0,i=t.length;if(e){if("number"!=typeof e)return r=M.sortedIndex(t,n),t[r]===n?r:-1;r=0>e?Math.max(0,i+e):e}if(x&&t.indexOf===x)return t.indexOf(n,e);for(;i>r;r++)if(t[r]===n)return r;return-1},M.lastIndexOf=function(t,n,e){if(null==t)return-1;var r=null!=e;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(n,e):t.lastIndexOf(n);for(var i=r?e:t.length;i--;)if(t[i]===n)return i;return-1},M.range=function(t,n,e){arguments.length<=1&&(n=t||0,t=0),e=arguments[2]||1;for(var r=Math.max(Math.ceil((n-t)/e),0),i=0,a=new Array(r);r>i;)a[i++]=t,t+=e;return a};var E=function(){};M.bind=function(t,n){var e,r;if(k&&t.bind===k)return k.apply(t,l.call(arguments,1));if(!M.isFunction(t))throw new TypeError;return e=l.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(n,e.concat(l.call(arguments)));E.prototype=t.prototype;var i=new E;E.prototype=null;var a=t.apply(i,e.concat(l.call(arguments)));return Object(a)===a?a:i}},M.partial=function(t){var n=l.call(arguments,1);return function(){for(var e=0,r=n.slice(),i=0,a=r.length;a>i;i++)r[i]===M&&(r[i]=arguments[e++]);for(;e<arguments.length;)r.push(arguments[e++]);return t.apply(this,r)}},M.bindAll=function(t){var n=l.call(arguments,1);if(0===n.length)throw new Error("bindAll must be passed function names");return A(n,function(n){t[n]=M.bind(t[n],t)}),t},M.memoize=function(t,n){var e={};return n||(n=M.identity),function(){var r=n.apply(this,arguments);return M.has(e,r)?e[r]:e[r]=t.apply(this,arguments)}},M.delay=function(t,n){var e=l.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},M.defer=function(t){return M.delay.apply(M,[t,1].concat(l.call(arguments,1)))},M.throttle=function(t,n,e){var r,i,a,o=null,u=0;e||(e={});var l=function(){u=e.leading===!1?0:M.now(),o=null,a=t.apply(r,i),r=i=null};return function(){var s=M.now();u||e.leading!==!1||(u=s);var c=n-(s-u);return r=this,i=arguments,0>=c?(clearTimeout(o),o=null,u=s,a=t.apply(r,i),r=i=null):o||e.trailing===!1||(o=setTimeout(l,c)),a}},M.debounce=function(t,n,e){var r,i,a,o,u,l=function(){var s=M.now()-o;n>s?r=setTimeout(l,n-s):(r=null,e||(u=t.apply(a,i),a=i=null))};return function(){a=this,i=arguments,o=M.now();var s=e&&!r;return r||(r=setTimeout(l,n)),s&&(u=t.apply(a,i),a=i=null),u}},M.once=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},M.wrap=function(t,n){return M.partial(n,t)},M.compose=function(){var t=arguments;return function(){for(var n=arguments,e=t.length-1;e>=0;e--)n=[t[e].apply(this,n)];return n[0]}},M.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},M.keys=function(t){if(!M.isObject(t))return[];if(b)return b(t);var n=[];for(var e in t)M.has(t,e)&&n.push(e);return n},M.values=function(t){for(var n=M.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=t[n[i]];return r},M.pairs=function(t){for(var n=M.keys(t),e=n.length,r=new Array(e),i=0;e>i;i++)r[i]=[n[i],t[n[i]]];return r},M.invert=function(t){for(var n={},e=M.keys(t),r=0,i=e.length;i>r;r++)n[t[e[r]]]=e[r];return n},M.functions=M.methods=function(t){var n=[];for(var e in t)M.isFunction(t[e])&&n.push(e);return n.sort()},M.extend=function(t){return A(l.call(arguments,1),function(n){if(n)for(var e in n)t[e]=n[e]}),t},M.pick=function(t){var n={},e=s.apply(i,l.call(arguments,1));return A(e,function(e){e in t&&(n[e]=t[e])}),n},M.omit=function(t){var n={},e=s.apply(i,l.call(arguments,1));for(var r in t)M.contains(e,r)||(n[r]=t[r]);return n},M.defaults=function(t){return A(l.call(arguments,1),function(n){if(n)for(var e in n)void 0===t[e]&&(t[e]=n[e])}),t},M.clone=function(t){return M.isObject(t)?M.isArray(t)?t.slice():M.extend({},t):t},M.tap=function(t,n){return n(t),t};var z=function(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof M&&(t=t._wrapped),n instanceof M&&(n=n._wrapped);var i=c.call(t);if(i!=c.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var a=e.length;a--;)if(e[a]==t)return r[a]==n;var o=t.constructor,u=n.constructor;if(o!==u&&!(M.isFunction(o)&&o instanceof o&&M.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1;e.push(t),r.push(n);var l=0,s=!0;if("[object Array]"==i){if(l=t.length,s=l==n.length)for(;l--&&(s=z(t[l],n[l],e,r)););}else{for(var f in t)if(M.has(t,f)&&(l++,!(s=M.has(n,f)&&z(t[f],n[f],e,r))))break;if(s){for(f in n)if(M.has(n,f)&&!l--)break;s=!l}}return e.pop(),r.pop(),s};M.isEqual=function(t,n){return z(t,n,[],[])},M.isEmpty=function(t){if(null==t)return!0;if(M.isArray(t)||M.isString(t))return 0===t.length;for(var n in t)if(M.has(t,n))return!1;return!0},M.isElement=function(t){return!(!t||1!==t.nodeType)},M.isArray=w||function(t){return"[object Array]"==c.call(t)},M.isObject=function(t){return t===Object(t)},A(["Arguments","Function","String","Number","Date","RegExp"],function(t){M["is"+t]=function(n){return c.call(n)=="[object "+t+"]"}}),M.isArguments(arguments)||(M.isArguments=function(t){return!(!t||!M.has(t,"callee"))}),"function"!=typeof/./&&(M.isFunction=function(t){return"function"==typeof t}),M.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},M.isNaN=function(t){return M.isNumber(t)&&t!=+t},M.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.has=function(t,n){return f.call(t,n)},M.noConflict=function(){return t._=n,this},M.identity=function(t){return t},M.constant=function(t){return function(){return t}},M.property=function(t){return function(n){return n[t]}},M.matches=function(t){return function(n){if(n===t)return!0;for(var e in t)if(t[e]!==n[e])return!1;return!0}},M.times=function(t,n,e){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=n.call(e,i);return r},M.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},M.now=Date.now||function(){return(new Date).getTime()};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=M.invert(q.escape);var N={escape:new RegExp("["+M.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(q.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(t){M[t]=function(n){return null==n?"":(""+n).replace(N[t],function(n){return q[t][n]})}}),M.result=function(t,n){if(null==t)return void 0;var e=t[n];return M.isFunction(e)?e.call(t):e},M.mixin=function(t){A(M.functions(t),function(n){var e=M[n]=t[n];M.prototype[n]=function(){var t=[this._wrapped];return u.apply(t,arguments),C.call(this,e.apply(M,t))}})};var B=0;M.uniqueId=function(t){var n=++B+"";return t?t+n:n},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(t,n,e){var r;e=M.defaults({},e,M.templateSettings);var i=new RegExp([(e.escape||R).source,(e.interpolate||R).source,(e.evaluate||R).source].join("|")+"|$","g"),a=0,o="__p+='";t.replace(i,function(n,e,r,i,u){return o+=t.slice(a,u).replace(T,function(t){return"\\"+I[t]}),e&&(o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),a=u+n.length,n}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(e.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(n)return r(n,M);var l=function(t){return r.call(this,t,M)};return l.source="function("+(e.variable||"obj")+"){\n"+o+"}",l},M.chain=function(t){return M(t).chain()};var C=function(t){return this._chain?M(t).chain():t};M.mixin(M),A(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];M.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],C.call(this,e)}}),A(["concat","join","slice"],function(t){var n=i[t];M.prototype[t]=function(){return C.call(this,n.apply(this._wrapped,arguments))}}),M.extend(M.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof e&&e.amd&&e("underscore",[],function(){return M})}.call(this),e("core/manager",["underscore"],function(t){var n={data_frames:{},panes:[]};return n.addData=function(n,e){entry={},entry[n]=e,t.extend(this.data_frames,entry)},n.getData=function(t){return this.data_frames[t]},n.addPane=function(t){this.panes.push(t)},n.selected=function(n,e){t.each(this.panes,function(t){t.pane.selected(n,e)})},n.update=function(){t.each(this.panes,function(t){t.pane.update()})},n.updateData=function(){},n}),function(){function t(t,n,e){var r=n&&e||0,i=0;for(n=n||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(n[r+i++]=h[t])});16>i;)n[r+i++]=0;return n}function r(t,n){var e=n||0,r=p;return r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+"-"+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]+r[t[e++]]}function i(t,n,e){var i=n&&e||0,a=n||[];t=t||{};var o=null!=t.clockseq?t.clockseq:y,u=null!=t.msecs?t.msecs:(new Date).getTime(),l=null!=t.nsecs?t.nsecs:_+1,s=u-x+(l-_)/1e4;if(0>s&&null==t.clockseq&&(o=o+1&16383),(0>s||u>x)&&null==t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=u,_=l,y=o,u+=122192928e5;var c=(1e4*(268435455&u)+l)%4294967296;a[i++]=c>>>24&255,a[i++]=c>>>16&255,a[i++]=c>>>8&255,a[i++]=255&c;var f=u/4294967296*1e4&268435455;a[i++]=f>>>8&255,a[i++]=255&f,a[i++]=f>>>24&15|16,a[i++]=f>>>16&255,a[i++]=o>>>8|128,a[i++]=255&o;for(var d=t.node||v,p=0;6>p;p++)a[i+p]=d[p];return n?n:r(a)}function a(t,n,e){var i=n&&e||0;"string"==typeof t&&(n="binary"==t?new d(16):null,t=null),t=t||{};var a=t.random||(t.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var u=0;16>u;u++)n[i+u]=a[u];return n||r(a)}var o,u=this;if("function"==typeof n)try{var l=n("crypto").randomBytes;o=l&&function(){return l(16)}}catch(s){}if(!o&&u.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);o=function(){return crypto.getRandomValues(c),c}}if(!o){var f=new Array(16);o=function(){for(var t,n=0;16>n;n++)0===(3&n)&&(t=4294967296*Math.random()),f[n]=t>>>((3&n)<<3)&255;return f}}for(var d="function"==typeof Buffer?Buffer:Array,p=[],h={},m=0;256>m;m++)p[m]=(m+256).toString(16).substr(1),h[p[m]]=m;var g=o(),v=[1|g[0],g[1],g[2],g[3],g[4],g[5]],y=16383&(g[6]<<8|g[7]),x=0,_=0,w=a;if(w.v1=i,w.v4=a,w.parse=t,w.unparse=r,w.BufferClass=d,"function"==typeof e&&e.amd)e("node-uuid",[],function(){return w});else if("undefined"!=typeof module&&module.exports)module.exports=w;else{var b=u.uuid;w.noConflict=function(){return u.uuid=b,w},u.uuid=w}}.call(this),e("view/diagrams/bar",["underscore","core/manager"],function(t,n){function e(e,r,i,a){var o={value:null,x:null,y:null,width:.9,color:null,hover:!0};arguments.length>3&&t.extend(o,a);var u,l=n.getData(i);u=null==o.color?d3.scale.category20b():d3.scale.ordinal().range(o.color),this.color_scale=u;var s,c=e.append("g"),f=[];if(null!=o.value){var d=l.column(o.value);s=t.uniq(d)}else s=l.column(o.x);return t.each(s,function(t){f.push({label:t,color:u(t)})}),this.model=c,this.scales=r,this.options=o,this.legends=f,this.df=l,this.df_id=i,this.uuid=o.uuid,this.update(),this}return e.prototype.update=function(){var t;if(null!==this.options.value){var n=this.df.columnWithFilters(this.uuid,this.options.value),e=this.countData(n);t=this.proceedData(e.x,e.y,this.options)}else{var r=this.df.columnWithFilters(this.uuid,this.options.x),i=this.df.columnWithFilters(this.uuid,this.options.y);t=this.proceedData(r,i,this.options)}var a=this.model.selectAll("rect").data(t);void 0==a[0][0]&&a.enter().append("rect").attr("height",0).attr("y",this.scales.y(0)),this.updateModels(a,this.scales,this.options)},e.prototype.proceedData=function(n,e){return t.map(t.zip(n,e),function(t){return{x:t[0],y:t[1]}})},e.prototype.updateModels=function(t,n,e){var r=this.color_scale,i=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(r(t.x)).darker(1)})},a=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return r(t.x)})},o=n.x.rangeBand()*e.width,u=n.x.rangeBand()*((1-e.width)/2);t.attr("x",function(t){return n.x(t.x)+u}).attr("width",o).attr("fill",function(t){return r(t.x)}).transition().duration(200).attr("y",function(t){return n.y(t.y)}).attr("height",function(t){return n.y(0)-n.y(t.y)}),e.hover&&t.on("mouseover",i).on("mouseout",a)},e.prototype.countData=function(n){var e={};return t.each(n,function(t){e[t]=e[t]||0,e[t]+=1}),{x:t.keys(e),y:t.values(e)}},e.prototype.checkSelectedData=function(){},e}),e("view/components/filter",["underscore","core/manager"],function(t){function n(n,e,r,i){var a={opacity:.125,color:"gray"};arguments.length>2&&t.extend(a,i);var o=function(){var t={x:u.empty()?e.x.domain():u.extent(),y:e.y.domain()};r(t)},u=d3.svg.brush().x(e.x).on("brushend",o),l=n.append("g"),s=d3.max(e.y.range())-d3.min(e.y.range()),c=d3.min(e.y.range());return l.call(u).selectAll("rect").attr("y",c).attr("height",s).style("fill-opacity",a.opacity).style("fill",a.color).style("shape-rendering","crispEdges"),this}return n}),e("view/diagrams/histogram",["underscore","core/manager","view/components/filter"],function(t,n){function e(e,r,i,a){var o={title:"histogram",value:null,bin_num:20,width:.9,color:"steelblue",stroke_color:"black",stroke_width:1,hover:!1};arguments.length>3&&t.extend(o,a);var u=n.getData(i),l=e.append("g");return this.scales=r,this.legends=[{label:o.title,color:o.color}],this.options=o,this.model=l,this.df=u,this.df_id=i,this.uuid=o.uuid,this.update(),this}return e.prototype.update=function(){var t=this.df.columnWithFilters(this.uuid,this.options.value),n=this.proceedData(t,this.options),e=this.model.selectAll("rect").data(n);void 0==e[0][0]&&(e=e.enter().append("rect").attr("height",0).attr("y",this.scales.y(0))),this.updateModels(e,this.scales,this.options)},e.prototype.proceedData=function(t,n){return d3.layout.histogram().bins(this.scales.x.ticks(n.bin_num))(t)},e.prototype.updateModels=function(t,n,e){var r=function(){d3.select(this).transition().duration(200).attr("fill",d3.rgb(e.color).darker(1))},i=function(){d3.select(this).transition().duration(200).attr("fill",e.color)};t.attr("x",function(t){return n.x(t.x)}).attr("width",function(t){return n.x(t.dx)-n.x(0)}).attr("fill",e.color).attr("stroke",e.stroke_color).attr("stroke-width",e.stroke_width).attr("clip-path","url(#"+this.options.clip_id+")").transition().duration(200).attr("y",function(t){return n.y(t.y)}).attr("height",function(t){return n.y(0)-n.y(t.y)}),e.hover&&t.on("mouseover",r).on("mouseout",i)},e.prototype.checkSelectedData=function(t){var e=this.options.value,r=function(n){var r=n[e];return r>t.x[0]&&r<t.x[1]?!0:!1};this.df.addFilter(this.uuid,r,["self"]),n.update()},e}),e("view/diagrams/scatter",["underscore","core/manager","view/components/filter"],function(t,n){function e(e,r,i,a){var o={title:"scatter",x:null,y:null,r:5,shape:"circle",color:"steelblue",stroke_color:"black",stroke_width:1,hover:!0};arguments.length>3&&t.extend(o,a),this.scales=r;var u=n.getData(i),l=e.append("g");return this.legends=function(t){var n=function(){t.render=!0,t.update()},e=function(){t.render=!1,t.update()};return[{label:o.title,color:o.color,on:n,off:e}]}(this),this.render=!0,this.options=o,this.model=l,this.df=u,this.df_id=i,this.update(),this}return e.prototype.update=function(){var t=this.proceedData(this.df.column(this.options.x),this.df.column(this.options.y),this.options);if(this.render){var n=this.model.selectAll("circle").data(t);void 0==n[0][0]&&n.enter().append("circle").attr("r",0)}else this.model.selectAll("circle").remove();this.updateModels(n,this.scales,this.options)},e.prototype.proceedData=function(n,e){return t.map(t.zip(n,e),function(t){return{x:t[0],y:t[1]}})},e.prototype.updateModels=function(t,n,e){var r=function(){d3.select(this).transition().duration(200).attr("fill",d3.rgb(e.color).darker(1))},i=function(){d3.select(this).transition().duration(200).attr("fill",e.color)};t.attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("fill",e.color).attr("stroke",e.stroke_color).attr("stroke-width",e.stroke_width).attr("clip-path","url(#"+this.options.clip_id+")").transition().duration(200).attr("r",e.r),e.hover&&t.on("mouseover",r).on("mouseout",i)},e.prototype.updateData=function(){this.df=n.getData(this.df_id);var t=this.proceedData(this.df.column(this.options.value),this.options),e=this.model.selectAll("circle").data(t);this.updateModels(e,this.scales,this.options)},e.prototype.checkSelectedData=function(){},e}),e("view/diagrams/line",["underscore","core/manager","view/components/filter"],function(t,n){function e(e,r,i,a){var o={x:null,y:null,title:"line",color:"steelblue",stroke_width:2};arguments.length>3&&t.extend(o,a),this.scales=r;var u=n.getData(i),l=e.append("g");return this.legends=function(t){var n=function(){t.render=!0,t.update()},e=function(){t.render=!1,t.update()};return[{label:o.title,color:o.color,on:n,off:e}]}(this),this.render=!0,this.options=o,this.model=l,this.df=u,this.df_id=i,this.update(),this}return e.prototype.update=function(){if(this.render){var t=this.proceedData(this.df.column(this.options.x),this.df.column(this.options.y),this.options);this.model.selectAll("path").remove();var n=this.model.append("path").attr("clip-path","url(#"+this.options.clip_id+")").datum(t);this.updateModels(n,this.scales,this.options)}else this.model.selectAll("path").remove()},e.prototype.proceedData=function(n,e){return t.map(t.zip(n,e),function(t){return{x:t[0],y:t[1]}})},e.prototype.updateModels=function(t,n,e){var r=d3.svg.line().x(function(t){return n.x(t.x)}).y(function(t){return n.y(t.y)});t.attr("d",r).attr("stroke",e.color).attr("stroke-width",e.stroke_width).attr("fill","none")},e.prototype.updateData=function(){this.df=n.getData(this.df_id);var t=this.proceedData(this.df.column(this.options.value),this.options),e=this.model.selectAll("path").datum(t);this.updateModels(e,this.scales,this.options)},e.prototype.checkSelectedData=function(){},e}),e("utils/simplex",["underscore"],function(t){function n(n){return center=[],t.each(t.zip.apply(null,n),function(n,e){center[e]=0,t.each(n,function(t){center[e]+=t}),center[e]=center[e]/n.length}),center}function e(r,s){r=t.sortBy(r,function(t){return s(t)});for(var c=r.length,f=r[0].length,d=r[c-1],p=r[c-2],h=r[0],m=n(r.concat().splice(0,c-1)),g=[],v=0;f>v;v++)g[v]=2*m[v]-d[v];if(s(g)>=s(d))for(var v=0;f>v;v++)r[c-1][v]=(1-i)*d[v]+i*g[v];else if(s(g)<(s(h)+(a-1)*s(d))/a){p_e=[];for(var v=0;f>v;v++)p_e[v]=a*g[v]-(a-1)*d[v];r[c-1]=s(p_e)<=s(g)?p_e:g}else r[c-1]=g;s(r[c-1])>=s(p)&&t.each(r,function(t,n){for(var e=0;f>e;e++)r[n][e]=.5*(t[e]+h[e])});var y=0;return t.each(r,function(t){y+=Math.pow(s(t)-s(h),2)}),o>y?r[c-1]:(u++,u>l?r[c-1]:e(r,s))}function r(n,r){var i=1,a=n.length,o=[n];return t.each(t.range(a),function(t){var e=n.concat();e[t]+=i,o.push(e)}),e(o,r)}var i=.7,a=1.5,o=1e-20,u=0,l=2e3;return r}),e("view/diagrams/venn",["underscore","core/manager","view/components/filter","utils/simplex"],function(t,n,e,r){function i(e,r,i,a){var o={category:null,count:null,color:null,stroke_color:"#000",stroke_width:1,opacity:.7,hover:!1,area_names:["VENN1","VENN2","VENN3"],filter_control:!1};arguments.length>3&&t.extend(o,a);var u,l=n.getData(i),s=e.append("g"),c=l.column(o.category),f=t.uniq(c);u=null==o.color?d3.scale.category20().domain(o.area_names):d3.scale.ordinal().range(o.color).domain(o.area_names),this.color_scale=u;for(var d=[],p=[[f[0]],[f[1]],[f[2]]],h=this.update,m=this.tellUpdate,g=this,v=0;3>v;v++)d.push({label:o.area_names[v],color:u(o.area_names[v])}),t.each(f,function(t){var n=v,e=function(){p[n].push(t),h.call(g),m.call(g)},r=function(){var e=p[n].indexOf(t);p[n].splice(e,1),h.call(g),m.call(g)},i=t==p[v]?"on":"off";d.push({label:t,color:"black",mode:i,on:e,off:r})}),d.push({label:""});var y="all";if(o.filter_control){d.push({label:"Filter",color:"gray"});var x=["all","overlapping","non-overlapping"],_=y;t.each(x,function(t){var n=function(){g.filter_mode=t,h.call(g),m.call(g)},e=t==_?"on":"off";d.push({label:t,color:"black",on:n,off:function(){},mode:e})})}return this.selected_category=p,this.filter_mode=y,this.legends=d,this.options=o,this.scales=r,this.model=s,this.df_id=i,this.df=l,this.uuid=o.uuid,this.update(),this.tellUpdate(),this}return i.prototype.getScales=function(n,e){var r=t.max(e.x.range())-t.min(e.x.range()),i=t.max(e.y.range())-t.min(e.y.range()),a={min:function(){var e=t.min(n.pos,function(t){return t.x-t.r});return e.x-e.r}(),max:function(){var e=t.max(n.pos,function(t){return t.x+t.r});return e.x+e.r}()},o={min:function(){var e=t.min(n.pos,function(t){return t.y-t.r});return e.y-e.r}(),max:function(){var e=t.max(n.pos,function(t){return t.y+t.r});return e.y+e.r}()},u=a.max-a.min,l=o.max-o.min,s=0;if(r/i>u/l){s=l/i;var c=s*r;a.min-=(c-u)/2,a.max+=(c-u)/2}else{s=u/r;var f=s*i;l.min-=(f-l)/2,l.max+=(f-l)/2}var d={};return d.x=d3.scale.linear().range(e.x.range()).domain([a.min,a.max]),d.y=d3.scale.linear().range(e.y.range()).domain([o.min,o.max]),d.r=d3.scale.linear().range([0,100]).domain([0,100*s]),d},i.prototype.update=function(){var t=this.df.columnWithFilters(this.uuid,this.options.count),n=this.df.columnWithFilters(this.uuid,this.options.category),e=this.proceedData(n,t,this.selected_category),r=this.getScales(e,this.scales),i=this.model.selectAll("circle").data(e.pos),a=this.model.selectAll("text").data(e.labels);void 0==i[0][0]&&(i=i.enter().append("circle")),void 0==a[0][0]&&(a=a.enter().append("text")),this.counted_items=e.counted_items,this.updateModels(i,r,this.options),this.updateLabels(a,r,this.options)},i.prototype.proceedData=function(n,e,i){for(var a=(function(){for(var r=[],a=function(){var r={};return t.each(t.zip(n,e),function(n){void 0==r[n[1]]&&(r[n[1]]={}),t.each(i,function(t,e){-1!=t.indexOf(n[0])&&(r[n[1]][e]=!0)})}),r}(),o=(function(n){var e=0;return t.each(t.values(a),function(r){t.some(n,function(t){return!(t in r)})||e++}),e}),u=0;3>u;u++){r[u]=[],r[u][u]=o([u]);for(var l=u+1;3>l;l++){var s=o([u,l]);r[u][l]=s}}return{table:r,counted_items:a}}()),o=a.table,u=a.counted_items,l=t.map(o,function(t,n){return Math.sqrt(o[n][n]/(2*Math.PI))}),s=function(n){for(var e=0,r=0;r<n.length;r+=2)for(var i=r+2;i<n.length;i+=2){var a=n[r],u=n[r+1],s=n[i],c=n[i+1],f=l[r/2],d=l[i/2],p=Math.sqrt(Math.pow(a-s,2)+Math.pow(u-c,2)),h=0;p>f+d?h=0:t.each([[f,d],[d,f]],function(t){var n=Math.acos((t[1]*t[1]-t[0]*t[0]+p*p)/(2*t[1]*p)),e=t[r]*t[r]*n-.5*t[1]*t[1]*Math.sin(2*n);h+=e}),e+=Math.pow(o[r/2][i/2]-h,2)}return e},c=function(){var n=[],e=o[0].length,r=t.max(o,function(t,n){for(var e=0,r=0;n>r;r++)e+=o[r][n];for(var r=n+1;r<t.length;r++)e+=o[n][r];return e}),i=e-r.length;n[2*i]=0,n[2*i+1]=0;for(var a=0,u=Math.PI/(1.5*(e-1)),s=0;e>s;s++)if(s!=i){var c=l[i]+l[s]/2;n[2*s]=c*Math.sin(a),n[2*s+1]=c*Math.cos(a),a+=u}return n}(),f=r(c,s),d=[],p=[],h=0;h<f.length;h+=2)d.push({x:f[h],y:f[h+1],r:l[h/2],id:h});
for(var h=0;3>h;h++){p.push({x:f[2*h],y:f[2*h+1],val:o[h][h]});for(var m=h+1;3>m;m++){var g=(f[2*h]+f[2*m])/2,v=(f[2*h+1]+f[2*m+1])/2;p.push({x:g,y:v,val:o[h][m]})}}return{pos:d,labels:p,counted_items:u}},i.prototype.updateModels=function(t,n,e){var r=this.color_scale,i=this.options.area_names;if(t.attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("stroke",e.stroke_color).attr("stroke-width",e.stroke_width).attr("fill",function(t){return r(i[t.id])}).attr("fill-opacity",e.opacity).transition().duration(500).attr("r",function(t){return n.r(t.r)}),e.hover){var a=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(r(i[t.id])).darker(1)})},o=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return r(i[t.id])})};t.on("mouseover",a).on("mouseout",o)}},i.prototype.updateLabels=function(t,n){t.attr("x",function(t){return n.x(t.x)}).attr("y",function(t){return n.y(t.y)}).attr("text-anchor","middle").text(function(t){return String(t.val)})},i.prototype.tellUpdate=function(){var e=this.selected_category,r=this.counted_items,i=this.filter_mode,a=this.options.category,o=this.options.count,u={all:function(n){return t.some(e,function(t){return-1!=t.indexOf(n[a])?!0:!1})},overlapping:function(n){if(!t.some(e,function(t){return-1!=t.indexOf(n[a])?!0:!1}))return!1;for(var i=0;3>i;i++)for(var u=i+1;3>u;u++)if(r[n[o]][i]&&r[n[o]][u])return!0;return!1},"non-overlapping":function(n){if(!t.some(e,function(t){return-1!=t.indexOf(n[a])?!0:!1}))return!1;for(var i=0;3>i;i++)for(var u=i+1;3>u;u++)if(r[n[o]][i]&&r[n[o]][u])return!1;return!0}}[i];this.df.addFilter(this.uuid,u,["self"]),n.update()},i}),e("view/diagrams/multiple_venn",["underscore","core/manager","view/components/filter","utils/simplex"],function(t,n,e,r){function i(e,r,i,a){var o={category:null,count:null,color:null,stroke_color:"#000",stroke_width:1,opacity:.7,hover:!1};arguments.length>3&&t.extend(o,a),this.getScales=function(n,e){var r=t.max(e.x.range())-t.min(e.x.range()),i=t.max(e.y.range())-t.min(e.y.range()),a={min:function(){var e=t.min(n.pos,function(t){return t.x-t.r});return e.x-e.r}(),max:function(){var e=t.max(n.pos,function(t){return t.x+t.r});return e.x+e.r}()},o={min:function(){var e=t.min(n.pos,function(t){return t.y-t.r});return e.y-e.r}(),max:function(){var e=t.max(n.pos,function(t){return t.y+t.r});return e.y+e.r}()},u=a.max-a.min,l=o.max-o.min,s=0;if(r/i>u/l){s=l/i;var c=s*r;a.min-=(c-u)/2,a.max+=(c-u)/2}else{s=u/r;var f=s*i;l.min-=(f-l)/2,l.max+=(f-l)/2}var d={};return d.x=d3.scale.linear().range(e.x.range()).domain([a.min,a.max]),d.y=d3.scale.linear().range(e.y.range()).domain([o.min,o.max]),d.r=d3.scale.linear().range([0,100]).domain([0,100*s]),d};var u=n.getData(i),l=this.proceedData(u.column(o.category),u.column(o.count)),s=this.getScales(l,r),c=e.append("g"),f=c.selectAll("circle").data(l.pos).enter().append("circle"),d=c.selectAll("text").data(l.labels).enter().append("text");this.color_scale=null==o.color?d3.scale.category20():d3.scale.ordinal().range(o.color);var p=this.color_scale;this.updateModels(f,s,o),this.updateLabels(d,s,o);var h=[];return t.each(l.pos,function(t){h.push({label:t.name,color:p(t.name)})}),this.legends=h,this.scales=r,this.options=o,this.model=c,this.df=u,this.df_id=i,this}return i.prototype.proceedData=function(n,e){for(var i=t.uniq(n),a=(function(){for(var r=[],a=function(){var r={};return t.each(t.zip(n,e),function(t){void 0==r[t[1]]&&(r[t[1]]={}),r[t[1]][t[0]]=!0}),t.values(r)}(),o=(function(n){var e=0;return t.each(a,function(r){t.some(n,function(t){return!(t in r)})||e++}),e}),u=0;u<i.length;u++){r[u]=[],r[u][u]=o([i[u]]);for(var l=u+1;l<i.length;l++){var s=o([i[u],i[l]]);r[u][l]=s}}return r}()),o=t.map(a,function(t,n){return Math.sqrt(a[n][n]/(2*Math.PI))}),u=function(n){for(var e=0,r=0;r<n.length;r+=2)for(var i=r+2;i<n.length;i+=2){var u=n[r],l=n[r+1],s=n[i],c=n[i+1],f=o[r/2],d=o[i/2],p=Math.sqrt(Math.pow(u-s,2)+Math.pow(l-c,2)),h=0;p>f+d?h=0:t.each([[f,d],[d,f]],function(t){var n=Math.acos((t[1]*t[1]-t[0]*t[0]+p*p)/(2*t[1]*p)),e=t[r]*t[r]*n-.5*t[1]*t[1]*Math.sin(2*n);h+=e}),e+=Math.pow(a[r/2][i/2]-h,2)}return e},l=function(){var n=[],e=a[0].length,r=t.max(a,function(t,n){for(var e=0,r=0;n>r;r++)e+=a[r][n];for(var r=n+1;r<t.length;r++)e+=a[n][r];return e}),i=e-r.length;n[2*i]=0,n[2*i+1]=0;for(var u=0,l=Math.PI/(1.5*(e-1)),s=0;e>s;s++)if(s!=i){var c=o[i]+o[s]/2;n[2*s]=c*Math.sin(u),n[2*s+1]=c*Math.cos(u),u+=l}return n}(),s=r(l,u),c=[],f=[],d=0;d<s.length;d+=2)c.push({x:s[d],y:s[d+1],r:o[d/2],name:i[d/2]});for(var d=0;d<i.length;d++){f.push({x:s[2*d],y:s[2*d+1],val:a[d][d]});for(var p=d+1;p<i.length;p++){var h=(s[2*d]+s[2*p])/2,m=(s[2*d+1]+s[2*p+1])/2;f.push({x:h,y:m,val:a[d][p]})}}return{pos:c,labels:f}},i.prototype.updateModels=function(t,n,e){var r=this.color_scale,i=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(r(t.name)).darker(1)})},a=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return r(t.name)})};t.attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("stroke",e.stroke_color).attr("stroke-width",e.stroke_width).attr("fill",function(t){return r(t.name)}).attr("fill-opacity",e.opacity).transition().duration(500).attr("r",function(t){return n.r(t.r)}),e.hover&&t.on("mouseover",i).on("mouseout",a)},i.prototype.updateLabels=function(t,n){t.attr("x",function(t){return n.x(t.x)}).attr("y",function(t){return n.y(t.y)}).attr("text-anchor","middle").text(function(t){return String(t.val)})},i.prototype.selected=function(t,n){var e=this.df.pickUpCells(this.options.count,n),r=this.df.pickUpCells(this.options.category,n),t=this.proceedData(r,e,this.options),i=this.getScales(t,this.scales),a=this.model.selectAll("circle").data(t.pos),o=this.model.selectAll("text").data(t.labels);this.updateModels(a,i,this.options),this.updateLabels(o,i,this.options)},i.prototype.update=function(){},i.prototype.checkSelectedData=function(){},i}),e("view/diagrams/diagrams",["require","exports","module","view/diagrams/bar","view/diagrams/histogram","view/diagrams/scatter","view/diagrams/line","view/diagrams/venn","view/diagrams/multiple_venn"],function(t){return diagrams={},diagrams.bar=t("view/diagrams/bar"),diagrams.histogram=t("view/diagrams/histogram"),diagrams.scatter=t("view/diagrams/scatter"),diagrams.line=t("view/diagrams/line"),diagrams.venn=t("view/diagrams/venn"),diagrams.multiple_venn=t("view/diagrams/multiple_venn"),diagrams}),e("view/components/axis",["underscore","core/manager"],function(t,n){function e(e,r,i){var a={width:0,height:0,margin:{top:0,bottom:0,left:0,right:0},stroke_color:"#fff",stroke_width:1,x_label:"X",y_label:"Y",grid:!0};arguments.length>2&&t.extend(a,i);var o=d3.svg.axis().scale(r.x).orient("bottom"),u=d3.svg.axis().scale(r.y).orient("left");e.append("g").attr("class","x_axis"),e.append("g").attr("class","y_axis"),e.append("text").attr("x",a.width/2).attr("y",a.height+a.margin.bottom/1.5).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).style("font-family","sans-serif").text(a.x_label),e.append("text").attr("x",-a.margin.left/1.5).attr("y",a.height/2).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).attr("transform","rotate(-90,"+-a.margin.left/1.5+","+a.height/2+")").text(a.y_label);var l=function(){e.select(".x_axis").call(o),e.select(".y_axis").call(u),e.selectAll(".x_axis, .y_axis").selectAll("path, line").style("z-index",100).style("fill","none").style("stroke",a.stroke_color).style("stroke-width",a.stroke_width),e.selectAll(".x_axis, .y_axis").selectAll("text").style("font-family","sans-serif").attr("fill","rgb(50,50,50)"),e.selectAll(".x_axis").attr("transform","translate(0,"+(a.height+4)+")"),e.selectAll(".y_axis").attr("transform","translate(-4,0)"),n.update()};if(a.grid&&(o.tickSize(-1*a.height),u.tickSize(-1*a.width)),a.zoom){var s=d3.behavior.zoom().x(r.x).y(r.y).scaleExtent([1,5]).on("zoom",l);e.call(s)}return l(),this.model=e,this}return e}),e("view/components/legend",["underscore","core/manager"],function(t){function n(n,e){var r={title:"",width:100,height:500,fill_color:"none",stroke_color:"#000",stroke_width:0,title_height:15,margin:{top:18,bottom:8,right:8,left:18},middle:!1};arguments.length>1&&t.extend(r,e),n.append("rect").attr("width",r.width).attr("height",r.height).attr("x",0).attr("y",0).attr("fill",r.fill_color).attr("stroke",r.stroke_color).attr("stroke-width",r.stroke_width);var i=n.append("g").attr("transform","translate("+r.margin.left+","+r.margin.top+")");return i.append("text").attr("x",0).attr("y",0).text(r.title),this.model=i,this.options=r,this.data=[],this}return n.prototype.add=function(t,n,e,r,i){this.data.push({label:t,color:n,on:e,off:r});var a=this.model.selectAll("g").data(this.data).enter().append("g"),o=this.options.title_height,u=this.options.height;if(this.options.width/100>2?a.attr("transform",function(t,n){return"translate("+100*Math.floor(n/8)+","+(o+25*(n%8))+")"}):a.attr("transform",function(t,n){return"translate(0,"+(o+25*n)+")"}),void 0!==n){var l=a.append("circle").attr("cx","8").attr("cy","8").attr("r","6").attr("stroke",function(t){return t.color}).attr("stroke-width","2").attr("fill",function(t){return t.color});"off"==i?l.attr("fill-opacity",0):l.attr("fill-opacity",1),void 0!==e&&void 0!==r&&l.on("click",function(t){var n=d3.select(this);1==n.attr("fill-opacity")?(n.attr("fill-opacity",0),t.off()):(n.attr("fill-opacity",1),t.on())}).style("cursor","pointer")}if(a.append("text").attr("x","18").attr("y","12").attr("font-size","12").text(function(t){return t.label}),this.options.middle){var u=o+25*this.data.length;this.model.attr("transform","translate("+this.options.margin.left+","+(this.options.height-u)/2+")")}},n}),e("view/pane",["underscore","node-uuid","view/diagrams/diagrams","view/components/axis","view/components/filter","view/components/legend"],function(t,n,e,r,i,a){function o(e,i){var o={width:700,height:500,margin:{top:30,bottom:80,left:80,right:30},xrange:[0,0],yrange:[0,0],x_label:"X",y_label:"Y",zoom:!1,grid:!0,scale:"fixed",bg_color:"#eee",grid_color:"#fff",legend:!1,legend_width:100,legend_options:{}};arguments.length>1&&t.extend(o,i),this.uuid=n.v4();var u=e.append("svg").attr("width",o.width).attr("height",o.height),l=o.width-o.margin.left-o.margin.right,s=o.height-o.margin.top-o.margin.bottom;o.legend&&(l-=o.legend_width);var c={x:[0,l],y:[s,0]},f={};t.each({x:"xrange",y:"yrange"},function(n,e){f[e]=o[n].length>2||t.any(o[n],function(t){return!isFinite(t)})?d3.scale.ordinal().domain(o[n]).rangeBands(c[e]):d3.scale.linear().domain(o[n]).range(c[e])}),u.append("g").attr("transform","translate("+o.margin.left+","+o.margin.top+")").append("rect").attr("x",0).attr("y",0).attr("width",l).attr("height",s).attr("stroke","#000000").attr("stroke_width",2).attr("fill",o.bg_color).style("z-index",1);new r(u.select("g"),f,{width:l,height:s,margin:o.margin,grid:o.grid,zoom:o.zoom,x_label:o.x_label,y_label:o.y_label,stroke_color:o.grid_color});if(u.select("g").append("g").attr("class","context").append("clipPath").attr("id",this.uuid+"clip_context").append("rect").attr("x",0).attr("y",0).attr("width",l).attr("height",s),o.legend){var d=u.select("g").append("g").attr("transform","translate("+l+",0)");o.legend_options.height=s,o.legend_options.width=o.legend_width,this.legend=new a(d,o.legend_options)}return this.diagrams=[],this.context=u.select(".context"),this.scales=f,this.options=o,this.filter=null,this}return o.prototype.addDiagram=function(r,i,a){t.extend(a,{uuid:n.v4(),clip_id:this.uuid+"clip_context"});var o=new e[r](this.context,this.scales,i,a),u=this.legend;this.options.legend&&t.each(o.legends,function(t){u.add(t.label,t.color,t.on,t.off,t.mode)}),this.diagrams.push(o)},o.prototype.addFilter=function(n,e){var r=this.diagrams,a=function(n){t.each(r,function(t){t.checkSelectedData(n)})};this.filter=new i(this.context,this.scales,a,e)},o.prototype.selected=function(n,e){var r=this.diagrams;"fluid"==this.options.scale&&t.each(r,function(t){t.df_id==n&&t.selected(n,e)})},o.prototype.update=function(){t.each(this.diagrams,function(t){t.update()})},o}),e("utils/dataframe",["underscore"],function(t){function n(t,n){if(n instanceof String&&/url(.+)/g.test(n)){var e=n.match(/url\((.+)\)/)[1],r=this;d3.json(e,function(t,n){r.raw=JSON.parse(n)}),this.raw={}}else this.raw=n;return this.filters={},this}return n.prototype.row=function(t){return this.raw[t]},n.prototype.column=function(n){var e=[],r=this.raw;return t.each(r,function(t){e.push(t[n])}),e},n.prototype.addFilter=function(t,n,e){this.filters[t]={func:n,excepts:e}},n.prototype.columnWithFilters=function(n,e){var r=this.raw.concat();return t.each(this.filters,function(e,i){(-1==e.excepts.indexOf("self")||i!=n)&&(n in e.excepts||(r=t.filter(r,e.func)))}),t.map(r,function(t){return t[e]})},n.prototype.pickUpCells=function(n,e){var r=this.column(n);return t.map(e,function(t){return r[t]})},n.prototype.columnRange=function(t){var n=this.column(t);return{max:d3.max(n,function(t){return t}),min:d3.min(n,function(t){return t})}},n}),e("core/parse",["underscore","core/manager","view/pane","utils/dataframe"],function(t,n,e,r){function i(i,a){element=d3.select(a),t.each(i.data,function(t,e){n.addData(e,new r(e,t)),n.update()}),t.each(i.panes,function(r){var i=new e(element,r.options),a=[];if(t.each(r.diagrams,function(t){i.addDiagram(t.type,t.data,t.options||{}),a.push(t.data)}),void 0!==r.filter){var o=r.filter;i.addFilter(o.type,o.options||{})}n.addPane({pane:i,data:a})})}return i}),e("main",["require","exports","module","core/parse"],function(t){var n={};return n.core={},n.core.parse=t("core/parse"),n}),n("main")});