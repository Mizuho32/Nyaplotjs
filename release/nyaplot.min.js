/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     uuid.js
//
//     Copyright (c) 2010-2012 Robert Kieffer
//     MIT License - http://opensource.org/licenses/mit-license.php

!function(n,t){n.Nyaplot=t()}(this,function(){var n,t,r;return function(e){function i(n,t){return w.call(n,t)}function u(n,t){var r,e,i,u,a,o,c,l,s,f,p,h=t&&t.split("/"),d=m.map,g=d&&d["*"]||{};if(n&&"."===n.charAt(0))if(t){for(h=h.slice(0,h.length-1),n=n.split("/"),a=n.length-1,m.nodeIdCompat&&b.test(n[a])&&(n[a]=n[a].replace(b,"")),n=h.concat(n),s=0;s<n.length;s+=1)if(p=n[s],"."===p)n.splice(s,1),s-=1;else if(".."===p){if(1===s&&(".."===n[2]||".."===n[0]))break;s>0&&(n.splice(s-1,2),s-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((h||g)&&d){for(r=n.split("/"),s=r.length;s>0;s-=1){if(e=r.slice(0,s).join("/"),h)for(f=h.length;f>0;f-=1)if(i=d[h.slice(0,f).join("/")],i&&(i=i[e])){u=i,o=s;break}if(u)break;!c&&g&&g[e]&&(c=g[e],l=s)}!u&&c&&(u=c,o=l),u&&(r.splice(0,o,u),n=r.join("/"))}return n}function a(n,t){return function(){return h.apply(e,_.call(arguments,0).concat([n,t]))}}function o(n){return function(t){return u(t,n)}}function c(n){return function(t){v[n]=t}}function l(n){if(i(y,n)){var t=y[n];delete y[n],x[n]=!0,p.apply(e,t)}if(!i(v,n)&&!i(x,n))throw new Error("No "+n);return v[n]}function s(n){var t,r=n?n.indexOf("!"):-1;return r>-1&&(t=n.substring(0,r),n=n.substring(r+1,n.length)),[t,n]}function f(n){return function(){return m&&m.config&&m.config[n]||{}}}var p,h,d,g,v={},y={},m={},x={},w=Object.prototype.hasOwnProperty,_=[].slice,b=/\.js$/;d=function(n,t){var r,e=s(n),i=e[0];return n=e[1],i&&(i=u(i,t),r=l(i)),i?n=r&&r.normalize?r.normalize(n,o(t)):u(n,t):(n=u(n,t),e=s(n),i=e[0],n=e[1],i&&(r=l(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}},g={require:function(n){return a(n)},exports:function(n){var t=v[n];return"undefined"!=typeof t?t:v[n]={}},module:function(n){return{id:n,uri:"",exports:v[n],config:f(n)}}},p=function(n,t,r,u){var o,s,f,p,h,m,w=[],_=typeof r;if(u=u||n,"undefined"===_||"function"===_){for(t=!t.length&&r.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(p=d(t[h],u),s=p.f,"require"===s)w[h]=g.require(n);else if("exports"===s)w[h]=g.exports(n),m=!0;else if("module"===s)o=w[h]=g.module(n);else if(i(v,s)||i(y,s)||i(x,s))w[h]=l(s);else{if(!p.p)throw new Error(n+" missing "+s);p.p.load(p.n,a(u,!0),c(s),{}),w[h]=v[s]}f=r?r.apply(v[n],w):void 0,n&&(o&&o.exports!==e&&o.exports!==v[n]?v[n]=o.exports:f===e&&m||(v[n]=f))}else n&&(v[n]=r)},n=t=h=function(n,t,r,i,u){if("string"==typeof n)return g[n]?g[n](t):l(d(n,t).f);if(!n.splice){if(m=n,m.deps&&h(m.deps,m.callback),!t)return;t.splice?(n=t,t=r,r=null):n=e}return t=t||function(){},"function"==typeof r&&(r=i,i=u),i?p(e,n,t,r):setTimeout(function(){p(e,n,t,r)},4),h},h.config=function(n){return h(n)},n._defined=v,r=function(n,t,r){t.splice||(r=t,t=[]),i(v,n)||i(y,n)||(y[n]=[n,t,r])},r.amd={jQuery:!0}}(),r("../contrib/almond/almond",function(){}),function(){var n=this,t=n._,e={},i=Array.prototype,u=Object.prototype,a=Function.prototype,o=i.push,c=i.slice,l=i.concat,s=u.toString,f=u.hasOwnProperty,p=i.forEach,h=i.map,d=i.reduce,g=i.reduceRight,v=i.filter,y=i.every,m=i.some,x=i.indexOf,w=i.lastIndexOf,_=Array.isArray,b=Object.keys,k=a.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):n._=A,A.VERSION="1.6.0";var j=A.each=A.forEach=function(n,t,r){if(null==n)return n;if(p&&n.forEach===p)n.forEach(t,r);else if(n.length===+n.length){for(var i=0,u=n.length;u>i;i++)if(t.call(r,n[i],i,n)===e)return}else for(var a=A.keys(n),i=0,u=a.length;u>i;i++)if(t.call(r,n[a[i]],a[i],n)===e)return;return n};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:h&&n.map===h?n.map(t,r):(j(n,function(n,i,u){e.push(t.call(r,n,i,u))}),e)};var O="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),d&&n.reduce===d)return e&&(t=A.bind(t,e)),i?n.reduce(t,r):n.reduce(t);if(j(n,function(n,u,a){i?r=t.call(e,r,n,u,a):(r=n,i=!0)}),!i)throw new TypeError(O);return r},A.reduceRight=A.foldr=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),g&&n.reduceRight===g)return e&&(t=A.bind(t,e)),i?n.reduceRight(t,r):n.reduceRight(t);var u=n.length;if(u!==+u){var a=A.keys(n);u=a.length}if(j(n,function(o,c,l){c=a?a[--u]:--u,i?r=t.call(e,r,n[c],c,l):(r=n[c],i=!0)}),!i)throw new TypeError(O);return r},A.find=A.detect=function(n,t,r){var e;return E(n,function(n,i,u){return t.call(r,n,i,u)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:v&&n.filter===v?n.filter(t,r):(j(n,function(n,i,u){t.call(r,n,i,u)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,i){return!t.call(r,n,e,i)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var i=!0;return null==n?i:y&&n.every===y?n.every(t,r):(j(n,function(n,u,a){return(i=i&&t.call(r,n,u,a))?void 0:e}),!!i)};var E=A.some=A.any=function(n,t,r){t||(t=A.identity);var i=!1;return null==n?i:m&&n.some===m?n.some(t,r):(j(n,function(n,u,a){return i||(i=t.call(r,n,u,a))?e:void 0}),!!i)};A.contains=A.include=function(n,t){return null==n?!1:x&&n.indexOf===x?-1!=n.indexOf(t):E(n,function(n){return n===t})},A.invoke=function(n,t){var r=c.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,A.property(t))},A.where=function(n,t){return A.filter(n,A.matches(t))},A.findWhere=function(n,t){return A.find(n,A.matches(t))},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,i=-1/0;return j(n,function(n,u,a){var o=t?t.call(r,n,u,a):n;o>i&&(e=n,i=o)}),e},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,i=1/0;return j(n,function(n,u,a){var o=t?t.call(r,n,u,a):n;i>o&&(e=n,i=o)}),e},A.shuffle=function(n){var t,r=0,e=[];return j(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=A.values(n)),n[A.random(n.length-1)]):A.shuffle(n).slice(0,Math.max(0,t))};var q=function(n){return null==n?A.identity:A.isFunction(n)?n:A.property(n)};A.sortBy=function(n,t,r){return t=q(t),A.pluck(A.map(n,function(n,e,i){return{value:n,index:e,criteria:t.call(r,n,e,i)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var i={};return r=q(r),j(t,function(u,a){var o=r.call(e,u,a,t);n(i,o,u)}),i}};A.groupBy=F(function(n,t,r){A.has(n,t)?n[t].push(r):n[t]=[r]}),A.indexBy=F(function(n,t,r){n[t]=r}),A.countBy=F(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){r=q(r);for(var i=r.call(e,t),u=0,a=n.length;a>u;){var o=u+a>>>1;r.call(e,n[o])<i?u=o+1:a=o}return u},A.toArray=function(n){return n?A.isArray(n)?c.call(n):n.length===+n.length?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:n.length===+n.length?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:c.call(n,0,t)},A.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var R=function(n,t,r){return t&&A.every(n,A.isArray)?l.apply(r,n):(j(n,function(n){A.isArray(n)||A.isArguments(n)?t?o.apply(r,n):R(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return R(n,t,[])},A.without=function(n){return A.difference(n,c.call(arguments,1))},A.partition=function(n,t){var r=[],e=[];return j(n,function(n){(t(n)?r:e).push(n)}),[r,e]},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var i=r?A.map(n,r,e):n,u=[],a=[];return j(i,function(r,e){(t?e&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),u.push(n[e]))}),u},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=c.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.contains(t,n)})})},A.difference=function(n){var t=l.apply(i,c.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,i=n.length;i>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,i=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,i+r):r}if(x&&n.indexOf===x)return n.indexOf(t,r);for(;i>e;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(w&&n.lastIndexOf===w)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var i=e?r:n.length;i--;)if(n[i]===t)return i;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),i=0,u=new Array(e);e>i;)u[i++]=n,n+=r;return u};var S=function(){};A.bind=function(n,t){var r,e;if(k&&n.bind===k)return k.apply(n,c.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=c.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(c.call(arguments)));S.prototype=n.prototype;var i=new S;S.prototype=null;var u=n.apply(i,r.concat(c.call(arguments)));return Object(u)===u?u:i}},A.partial=function(n){var t=c.call(arguments,1);return function(){for(var r=0,e=t.slice(),i=0,u=e.length;u>i;i++)e[i]===A&&(e[i]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},A.bindAll=function(n){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return j(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(c.call(arguments,1)))},A.throttle=function(n,t,r){var e,i,u,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:A.now(),a=null,u=n.apply(e,i),e=i=null};return function(){var l=A.now();o||r.leading!==!1||(o=l);var s=t-(l-o);return e=this,i=arguments,0>=s?(clearTimeout(a),a=null,o=l,u=n.apply(e,i),e=i=null):a||r.trailing===!1||(a=setTimeout(c,s)),u}},A.debounce=function(n,t,r){var e,i,u,a,o,c=function(){var l=A.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(u,i),u=i=null))};return function(){u=this,i=arguments,a=A.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(u,i),u=i=null),o}},A.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},A.wrap=function(n,t){return A.partial(t,n)},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=function(n){if(!A.isObject(n))return[];if(b)return b(n);var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),i=0;r>i;i++)e[i]=n[t[i]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),i=0;r>i;i++)e[i]=[t[i],n[t[i]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,i=r.length;i>e;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return j(c.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=l.apply(i,c.call(arguments,1));return j(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=l.apply(i,c.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return j(c.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var i=s.call(n);if(i!=s.call(t))return!1;switch(i){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=r.length;u--;)if(r[u]==n)return e[u]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==i){if(c=n.length,l=c==t.length)for(;c--&&(l=N(n[c],t[c],r,e)););}else{for(var f in n)if(A.has(n,f)&&(c++,!(l=A.has(t,f)&&N(n[f],t[f],r,e))))break;if(l){for(f in t)if(A.has(t,f)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return N(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=_||function(n){return"[object Array]"==s.call(n)},A.isObject=function(n){return n===Object(n)},j(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return s.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==s.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return f.call(n,t)},A.noConflict=function(){return n._=t,this},A.identity=function(n){return n},A.constant=function(n){return function(){return n}},A.property=function(n){return function(t){return t[n]}},A.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),i=0;n>i;i++)e[i]=t.call(r,i);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},A.now=Date.now||function(){return(new Date).getTime()};var C={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};C.unescape=A.invert(C.escape);var M={escape:new RegExp("["+A.keys(C.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(C.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return C[n][t]})}}),A.result=function(n,t){if(null==n)return void 0;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){j(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return o.apply(n,arguments),D.call(this,r.apply(A,n))}})};var z=0;A.uniqueId=function(n){var t=++z+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var i=new RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),u=0,a="__p+='";n.replace(i,function(t,r,e,i,o){return a+=n.slice(u,o).replace(I,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),u=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},A.chain=function(n){return A(n).chain()};var D=function(n){return this._chain?A(n).chain():n};A.mixin(A),j(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),j(["concat","join","slice"],function(n){var t=i[n];A.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof r&&r.amd&&r("underscore",[],function(){return A})}.call(this),r("core",["underscore"],function(n){function t(t){n.each(t,function(t){function r(t){if(n.isObject(t)&&n.has(t,"sync")){var r=t.sync;return e(r)}return t}var a=i[t.type],o=a.callback,c=n.map(a.required_args,function(n){return r(t.args[n])}),l=n.reduce(n.extend(a.optional_args,n.omit.apply(null,[t.args].concat(a.required_args))),function(n,t,e){return n[e]=r(t),n},{});c.push(l),u[t.uuid]=o.apply(null,c)})}function r(n,t,r,e){i[n]={required_args:t,optional_args:r,callback:e}}function e(n){return u[n]}var i={},u={};return{register_parser:r,parse:t,get:e}}),function(){function n(n,t,r){var e=t&&r||0,i=0;for(t=t||[],n.toLowerCase().replace(/[0-9a-f]{2}/g,function(n){16>i&&(t[e+i++]=d[n])});16>i;)t[e+i++]=0;return t}function e(n,t){var r=t||0,e=h;return e[n[r++]]+e[n[r++]]+e[n[r++]]+e[n[r++]]+"-"+e[n[r++]]+e[n[r++]]+"-"+e[n[r++]]+e[n[r++]]+"-"+e[n[r++]]+e[n[r++]]+"-"+e[n[r++]]+e[n[r++]]+e[n[r++]]+e[n[r++]]+e[n[r++]]+e[n[r++]]}function i(n,t,r){var i=t&&r||0,u=t||[];n=n||{};var a=null!=n.clockseq?n.clockseq:m,o=null!=n.msecs?n.msecs:(new Date).getTime(),c=null!=n.nsecs?n.nsecs:w+1,l=o-x+(c-w)/1e4;if(0>l&&null==n.clockseq&&(a=a+1&16383),(0>l||o>x)&&null==n.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=o,w=c,m=a,o+=122192928e5;var s=(1e4*(268435455&o)+c)%4294967296;u[i++]=s>>>24&255,u[i++]=s>>>16&255,u[i++]=s>>>8&255,u[i++]=255&s;var f=o/4294967296*1e4&268435455;u[i++]=f>>>8&255,u[i++]=255&f,u[i++]=f>>>24&15|16,u[i++]=f>>>16&255,u[i++]=a>>>8|128,u[i++]=255&a;for(var p=n.node||y,h=0;6>h;h++)u[i+h]=p[h];return t?t:e(u)}function u(n,t,r){var i=t&&r||0;"string"==typeof n&&(t="binary"==n?new p(16):null,n=null),n=n||{};var u=n.random||(n.rng||a)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var o=0;16>o;o++)t[i+o]=u[o];return t||e(u)}var a,o=this;if("function"==typeof t)try{var c=t("crypto").randomBytes;a=c&&function(){return c(16)}}catch(l){}if(!a&&o.crypto&&crypto.getRandomValues){var s=new Uint8Array(16);a=function(){return crypto.getRandomValues(s),s}}if(!a){var f=new Array(16);a=function(){for(var n,t=0;16>t;t++)0===(3&t)&&(n=4294967296*Math.random()),f[t]=n>>>((3&t)<<3)&255;return f}}for(var p="function"==typeof Buffer?Buffer:Array,h=[],d={},g=0;256>g;g++)h[g]=(g+256).toString(16).substr(1),d[h[g]]=g;var v=a(),y=[1|v[0],v[1],v[2],v[3],v[4],v[5]],m=16383&(v[6]<<8|v[7]),x=0,w=0,_=u;if(_.v1=i,_.v4=u,_.parse=n,_.unparse=e,_.BufferClass=p,"function"==typeof r&&r.amd)r("node-uuid",[],function(){return _});else if("undefined"!=typeof module&&module.exports)module.exports=_;else{var b=o.uuid;_.noConflict=function(){return o.uuid=b,_},o.uuid=_}}.call(this),r("parser/stage2d",["underscore","node-uuid","core"],function(n,t,r){return["stage2d",["sheets"],{margin:{x:40,y:10},width:500,height:500},function(t,e){var i=d3.select(document.createElementNS("http://www.w3.org/2000/svg","svg")).style({width:e.width,height:e.height}),u=i.append("g").attr("transform","translate("+e.margin.x+","+e.margin.y+")").attr("class","root"),a=u.append("g").attr("class","sheets_root");return n.each(t,function(n){var t=r.get(n),e=t.node();a.node().appendChild(e)}),i}]}),r("utils/dataframe",["underscore"],function(n){function t(t){this.raw=t;var r=n.keys(t[0]),e=n.zip.apply(this,n.map(t,function(t){return n.toArray(t)})),i=n.filter(e,function(t){return n.all(t,function(t){return n.isArray(t)})});return this.nested=1==i.length?r[e.indexOf(i[0])]:!1,this.filters={},this}return t.prototype.row=function(n){return this.raw[n]},t.prototype.column=function(t){var r=[],e=this.raw;return n.each(e,function(n){r.push(n[t])}),r},t.prototype.scale=function(t,r){if(this.isContinuous(t)){var e=this.columnRange(t);return e=n.range(e.min,e.max+1,(e.max-e.min)/(r.length-1)),d3.scale.linear().domain(e).range(r)}return d3.scale.ordinal().domain(n.uniq(this.column(t))).range(r)},t.prototype.isContinuous=function(t){return n.every(this.column(t),function(t){return n.isNumber(t)})},t.prototype.addFilter=function(n,t,r){this.filters[n]={func:t,excepts:r}},t.prototype.columnWithFilters=function(t,r){var e=this.raw.concat();return n.each(this.filters,function(r,i){(-1==r.excepts.indexOf("self")||i!=t)&&(t in r.excepts||(e=n.filter(e,r.func)))}),n.map(e,function(n){return n[r]})},t.prototype.pickUpCells=function(t,r){var e=this.column(t);return n.map(r,function(n){return e[n]})},t.prototype.getPartialDf=function(t){return n.map(this.raw,function(r){return n.reduce(t,function(n,t){return n[t]=r[t],n},{})})},t.prototype.nested_column=function(n,r){if(!this.nested)throw"Recieved dataframe is not nested.";var e=new t("",this.row(n)[this.nested]);return e.column(r)},t.prototype.columnRange=function(n){var t=this.column(n);return{max:d3.max(t,function(n){return n}),min:d3.min(t,function(n){return n})}},t}),r("parser/scale",["underscore","core","utils/dataframe"],function(n,t,r){return["df_scale",["data_id","column","range"],{},function(n,e,i){var u=t.get(n),a=new r(u);return a.scale(e,i)}]}),r("parser/position",["underscore"],function(){return["position2d",["x","y"],{},function(n,t){return function(r,e){return{x:n(r),y:t(e)}}}]}),r("parser/pane",["underscore","core"],function(n,t){return["pane",["parent_id","layout"],{},function(r,e){var i=d3.select("#"+r),u=function(r,e){if(!n.has(e,"type")){var i=t.get(e.sync);return void r.node().appendChild(i.node())}switch(e.type){case"columns":var a=r.append("div").style({display:"table"});n.each(e.contents,function(n){var t=a.append("div").style("display","table-cell");u(t,n)});break;case"rows":var o=r.append("div");n.each(e.contents,function(n){var t=o.append("div");u(t,n)});break;default:return}};u(i,e)}]}),r("parser/data",[],function(){return["data",["data"],{},function(n){return n}]}),r("parser/init",["underscore","core","parser/stage2d","parser/scale","parser/position","parser/pane","parser/data"],function(n,t){var r=[].slice.call(arguments,2);return function(){n.each(r,function(n){t.register_parser.apply(t,n)})}}),r("glyph",["underscore","core"],function(n,t){function r(n,r,e,i){r.shift(),t.register_parser(n,r,e,function(){var n=[].slice.call(arguments,0),t=d3.select(document.createElementNS("http://www.w3.org/2000/svg","g"));return n.unshift(t),i.apply(null,n)})}return{register_glyph:r}}),r("glyph/scatter",["underscore"],function(){return["scatter",["context","data","x","y","position"],{color:"steelblue",shape:"circle",size:100,stroke_color:"black",stroke_width:1,hover:!0},function(n,t,r,e,i,u){var a=n.selectAll("path").data(t);return a.enter().append("path").attr("transform",function(n){var t=i(n[r],n[e]);return"translate("+t.x+","+t.y+")"}).attr("fill",u.color).attr("stroke",u.stroke_color).attr("stroke-width",u.stroke_width).transition().duration(200).attr("d",d3.svg.symbol().type(u.shape).size(u.size)),a}]}),r("glyph/init",["underscore","glyph","glyph/scatter"],function(n,t,r){var e=[r];return function(){n.each(e,function(n){t.register_glyph.apply(t,n)})}}),r("sheet",["underscore","core"],function(n,t){function r(n,r,e,i){r.shift(),t.register_parser(n,r,e,function(){var n=[].slice.call(arguments,0),t=d3.select(document.createElementNS("http://www.w3.org/2000/svg","g"));return n.unshift(t),i.apply(null,n),t})}return{register_sheet:r}}),r("sheet/axis",["underscore"],function(){return["axis2d",["context","xscale","yscale","width","height"],{margin:{top:0,bottom:0,left:0,right:0},stroke_color:"#fff",stroke_width:1,grid:!0},function(n,t,r,e,i,u){var a=d3.svg.axis().scale(t).orient("bottom"),o=d3.svg.axis().scale(r).orient("left"),c=n.append("g");return c.append("g").attr("class","x_axis"),c.append("g").attr("class","y_axis"),u.grid&&(a.tickSize(-1*i),o.tickSize(-1*e)),c.select(".x_axis").call(a),c.select(".y_axis").call(o),c.selectAll(".x_axis, .y_axis").selectAll("path, line").style("fill","none").style("stroke",u.stroke_color).style("stroke-width",u.stroke_width),c.selectAll(".x_axis, .y_axis").selectAll("text").attr("fill","rgb(50,50,50)"),c.selectAll(".x_axis").attr("transform","translate(0,"+(i+4)+")"),c.selectAll(".y_axis").attr("transform","translate(-4,0)"),c}]}),r("sheet/background",[],function(){return["background2d",["context","width","height"],{bg_color:"#eee",stroke_width:1,stroke:"#666"},function(n,t,r,e){var i=n.append("g").attr("class","background");return i.append("rect").attr({x:0,y:0,width:t,height:r,fill:e.bg_color,stroke:e.stroke,"stroke-width":e.stroke_width}),i}]}),r("sheet/label",[],function(){return["label",["context","x","y"],{margin:{top:0,bottom:0,left:0,right:0},rotate_x:0,rotate_y:0},function(n,t,r,e){var i=n.append("g");return i.append("text").attr("x",e.width/2).attr("y",e.height+e.margin.bottom/1.5).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).text(t),i.append("text").attr("x",-e.margin.left/1.5).attr("y",e.height/2).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).attr("transform","rotate(-90,"+-e.margin.left/1.5+","+e.height/2+")").text(r),0!=e.rotate_y&&i.selectAll(".y_axis").selectAll("text").style("text-anchor","end").attr("transform",function(){return"rotate("+e.rotate_y+")"}),0!=e.rotate_x&&i.selectAll(".x_axis").selectAll("text").style("text-anchor","end").attr("transform",function(){return"rotate("+e.rotate_x+")"}),i}]}),r("sheet/context",["underscore","node-uuid","core"],function(n,t,r){return["context2d",["parent","glyphs"],{width:500,height:500},function(e,i,u){var a=t.v4()+"clip_context",o=e.append("g").attr("class","context");o.attr("clip-path","url(#"+a+")").append("clipPath").attr("id",a).append("rect").attr({x:0,y:0,width:u.width,height:u.height});var c=o.append("g");n.each(i,function(n){var t=r.get(n),e=t.node().parentNode;c.node().appendChild(e)})}]}),r("sheet/init",["underscore","sheet","sheet/axis","sheet/background","sheet/label","sheet/context"],function(n,t){var r=[].slice.call(arguments,2);return function(){n.each(r,function(n){t.register_sheet.apply(t,n)})}}),r("init",["underscore","parser/init","glyph/init","sheet/init"],function(n,t,r,e){return function(){n.each([t,r,e],function(n){n()})}}),r("main",["require","exports","module","init","core","glyph","sheet"],function(n){var t=n("init");return t(),{core:n("core"),glyph_manager:n("glyph"),sheet_manager:n("sheet")}}),t("main")});