/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

!function(n,t){n.Nyaplot=t()}(this,function(){var n,t,r;return function(e){function u(n,t){return w.call(n,t)}function i(n,t){var r,e,u,i,o,a,c,l,f,s,p,h=t&&t.split("/"),g=y.map,m=g&&g["*"]||{};if(n&&"."===n.charAt(0))if(t){for(h=h.slice(0,h.length-1),n=n.split("/"),o=n.length-1,y.nodeIdCompat&&_.test(n[o])&&(n[o]=n[o].replace(_,"")),n=h.concat(n),f=0;f<n.length;f+=1)if(p=n[f],"."===p)n.splice(f,1),f-=1;else if(".."===p){if(1===f&&(".."===n[2]||".."===n[0]))break;f>0&&(n.splice(f-1,2),f-=2)}n=n.join("/")}else 0===n.indexOf("./")&&(n=n.substring(2));if((h||m)&&g){for(r=n.split("/"),f=r.length;f>0;f-=1){if(e=r.slice(0,f).join("/"),h)for(s=h.length;s>0;s-=1)if(u=g[h.slice(0,s).join("/")],u&&(u=u[e])){i=u,a=f;break}if(i)break;!c&&m&&m[e]&&(c=m[e],l=f)}!i&&c&&(i=c,a=l),i&&(r.splice(0,a,i),n=r.join("/"))}return n}function o(n,t){return function(){return h.apply(e,b.call(arguments,0).concat([n,t]))}}function a(n){return function(t){return i(t,n)}}function c(n){return function(t){d[n]=t}}function l(n){if(u(v,n)){var t=v[n];delete v[n],x[n]=!0,p.apply(e,t)}if(!u(d,n)&&!u(x,n))throw new Error("No "+n);return d[n]}function f(n){var t,r=n?n.indexOf("!"):-1;return r>-1&&(t=n.substring(0,r),n=n.substring(r+1,n.length)),[t,n]}function s(n){return function(){return y&&y.config&&y.config[n]||{}}}var p,h,g,m,d={},v={},y={},x={},w=Object.prototype.hasOwnProperty,b=[].slice,_=/\.js$/;g=function(n,t){var r,e=f(n),u=e[0];return n=e[1],u&&(u=i(u,t),r=l(u)),u?n=r&&r.normalize?r.normalize(n,a(t)):i(n,t):(n=i(n,t),e=f(n),u=e[0],n=e[1],u&&(r=l(u))),{f:u?u+"!"+n:n,n:n,pr:u,p:r}},m={require:function(n){return o(n)},exports:function(n){var t=d[n];return"undefined"!=typeof t?t:d[n]={}},module:function(n){return{id:n,uri:"",exports:d[n],config:s(n)}}},p=function(n,t,r,i){var a,f,s,p,h,y,w=[],b=typeof r;if(i=i||n,"undefined"===b||"function"===b){for(t=!t.length&&r.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(p=g(t[h],i),f=p.f,"require"===f)w[h]=m.require(n);else if("exports"===f)w[h]=m.exports(n),y=!0;else if("module"===f)a=w[h]=m.module(n);else if(u(d,f)||u(v,f)||u(x,f))w[h]=l(f);else{if(!p.p)throw new Error(n+" missing "+f);p.p.load(p.n,o(i,!0),c(f),{}),w[h]=d[f]}s=r?r.apply(d[n],w):void 0,n&&(a&&a.exports!==e&&a.exports!==d[n]?d[n]=a.exports:s===e&&y||(d[n]=s))}else n&&(d[n]=r)},n=t=h=function(n,t,r,u,i){if("string"==typeof n)return m[n]?m[n](t):l(g(n,t).f);if(!n.splice){if(y=n,y.deps&&h(y.deps,y.callback),!t)return;t.splice?(n=t,t=r,r=null):n=e}return t=t||function(){},"function"==typeof r&&(r=u,u=i),u?p(e,n,t,r):setTimeout(function(){p(e,n,t,r)},4),h},h.config=function(n){return h(n)},n._defined=d,r=function(n,t,r){t.splice||(r=t,t=[]),u(d,n)||u(v,n)||(v[n]=[n,t,r])},r.amd={jQuery:!0}}(),r("../contrib/almond/almond",function(){}),function(){var n=this,t=n._,e={},u=Array.prototype,i=Object.prototype,o=Function.prototype,a=u.push,c=u.slice,l=u.concat,f=i.toString,s=i.hasOwnProperty,p=u.forEach,h=u.map,g=u.reduce,m=u.reduceRight,d=u.filter,v=u.every,y=u.some,x=u.indexOf,w=u.lastIndexOf,b=Array.isArray,_=Object.keys,j=o.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):n._=A,A.VERSION="1.6.0";var O=A.each=A.forEach=function(n,t,r){if(null==n)return n;if(p&&n.forEach===p)n.forEach(t,r);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(r,n[u],u,n)===e)return}else for(var o=A.keys(n),u=0,i=o.length;i>u;u++)if(t.call(r,n[o[u]],o[u],n)===e)return;return n};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:h&&n.map===h?n.map(t,r):(O(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var k="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),g&&n.reduce===g)return e&&(t=A.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(O(n,function(n,i,o){u?r=t.call(e,r,n,i,o):(r=n,u=!0)}),!u)throw new TypeError(k);return r},A.reduceRight=A.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),m&&n.reduceRight===m)return e&&(t=A.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var o=A.keys(n);i=o.length}if(O(n,function(a,c,l){c=o?o[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(k);return r},A.find=A.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(O(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var u=!0;return null==n?u:v&&n.every===v?n.every(t,r):(O(n,function(n,i,o){return(u=u&&t.call(r,n,i,o))?void 0:e}),!!u)};var E=A.some=A.any=function(n,t,r){t||(t=A.identity);var u=!1;return null==n?u:y&&n.some===y?n.some(t,r):(O(n,function(n,i,o){return u||(u=t.call(r,n,i,o))?e:void 0}),!!u)};A.contains=A.include=function(n,t){return null==n?!1:x&&n.indexOf===x?-1!=n.indexOf(t):E(n,function(n){return n===t})},A.invoke=function(n,t){var r=c.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,A.property(t))},A.where=function(n,t){return A.filter(n,A.matches(t))},A.findWhere=function(n,t){return A.find(n,A.matches(t))},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return O(n,function(n,i,o){var a=t?t.call(r,n,i,o):n;a>u&&(e=n,u=a)}),e},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return O(n,function(n,i,o){var a=t?t.call(r,n,i,o):n;u>a&&(e=n,u=a)}),e},A.shuffle=function(n){var t,r=0,e=[];return O(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=A.values(n)),n[A.random(n.length-1)]):A.shuffle(n).slice(0,Math.max(0,t))};var F=function(n){return null==n?A.identity:A.isFunction(n)?n:A.property(n)};A.sortBy=function(n,t,r){return t=F(t),A.pluck(A.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var q=function(n){return function(t,r,e){var u={};return r=F(r),O(t,function(i,o){var a=r.call(e,i,o,t);n(u,a,i)}),u}};A.groupBy=q(function(n,t,r){A.has(n,t)?n[t].push(r):n[t]=[r]}),A.indexBy=q(function(n,t,r){n[t]=r}),A.countBy=q(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){r=F(r);for(var u=r.call(e,t),i=0,o=n.length;o>i;){var a=i+o>>>1;r.call(e,n[a])<u?i=a+1:o=a}return i},A.toArray=function(n){return n?A.isArray(n)?c.call(n):n.length===+n.length?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:n.length===+n.length?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:c.call(n,0,t)},A.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var R=function(n,t,r){return t&&A.every(n,A.isArray)?l.apply(r,n):(O(n,function(n){A.isArray(n)||A.isArguments(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return R(n,t,[])},A.without=function(n){return A.difference(n,c.call(arguments,1))},A.partition=function(n,t){var r=[],e=[];return O(n,function(n){(t(n)?r:e).push(n)}),[r,e]},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var u=r?A.map(n,r,e):n,i=[],o=[];return O(u,function(r,e){(t?e&&o[o.length-1]===r:A.contains(o,r))||(o.push(r),i.push(n[e]))}),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=c.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.contains(t,n)})})},A.difference=function(n){var t=l.apply(u,c.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(x&&n.indexOf===x)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(w&&n.lastIndexOf===w)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var N=function(){};A.bind=function(n,t){var r,e;if(j&&n.bind===j)return j.apply(n,c.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=c.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(c.call(arguments)));N.prototype=n.prototype;var u=new N;N.prototype=null;var i=n.apply(u,r.concat(c.call(arguments)));return Object(i)===i?i:u}},A.partial=function(n){var t=c.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===A&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},A.bindAll=function(n){var t=c.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return O(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(c.call(arguments,1)))},A.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:A.now(),o=null,i=n.apply(e,u),e=u=null};return function(){var l=A.now();a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,u=arguments,0>=f?(clearTimeout(o),o=null,a=l,i=n.apply(e,u),e=u=null):o||r.trailing===!1||(o=setTimeout(c,f)),i}},A.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var l=A.now()-o;t>l?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,o=A.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(i,u),i=u=null),a}},A.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},A.wrap=function(n,t){return A.partial(t,n)},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=function(n){if(!A.isObject(n))return[];if(_)return _(n);var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return O(c.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=l.apply(u,c.call(arguments,1));return O(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=l.apply(u,c.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return O(c.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var u=f.call(n);if(u!=f.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var o=n.constructor,a=t.constructor;if(o!==a&&!(A.isFunction(o)&&o instanceof o&&A.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=S(n[c],t[c],r,e)););}else{for(var s in n)if(A.has(n,s)&&(c++,!(l=A.has(t,s)&&S(n[s],t[s],r,e))))break;if(l){for(s in t)if(A.has(t,s)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return S(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=b||function(n){return"[object Array]"==f.call(n)},A.isObject=function(n){return n===Object(n)},O(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return f.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==f.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return s.call(n,t)},A.noConflict=function(){return n._=t,this},A.identity=function(n){return n},A.constant=function(n){return function(){return n}},A.property=function(n){return function(t){return t[n]}},A.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},A.now=Date.now||function(){return(new Date).getTime()};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};M.unescape=A.invert(M.escape);var T={escape:new RegExp("["+A.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(M.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return M[n][t]})}}),A.result=function(n,t){if(null==n)return void 0;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){O(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(A,n))}})};var I=0;A.uniqueId=function(n){var t=++I+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var u=new RegExp([(r.escape||B).source,(r.interpolate||B).source,(r.evaluate||B).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(u,function(t,r,e,u,a){return o+=n.slice(i,a).replace(z,function(n){return"\\"+C[n]}),r&&(o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(o+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(o+="';\n"+u+"\n__p+='"),i=a+t.length,t}),o+="';\n",r.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{e=new Function(r.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+o+"}",c},A.chain=function(n){return A(n).chain()};var D=function(n){return this._chain?A(n).chain():n};A.mixin(A),O(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),O(["concat","join","slice"],function(n){var t=u[n];A.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof r&&r.amd&&r("underscore",[],function(){return A})}.call(this),r("core",["underscore"],function(n){function t(t){n.extend(i,n.reduce(t,function(t,r){var e=u[r.type].callback,i=e.func,o=n.map(e.required_args,function(n){return r.args[n]}),a=n.extend(e.optional_args,r);o.push(a);var c=i.apply(null,o);t[r.uuid]=c},{}))}function r(n,t,r,e){u[n]={required_args:t,optional_args:r,callback:e}}function e(n){return i[n]}var u={},i={};return{register_parser:r,parse:t,get:e}}),r("parser/glyph",["underscore","core"],function(n,t){function r(r,e,u){e.shift(),t.register_parser(r,e,u,function(){var r=[].slice.call(arguments,0),e=document.createElementNS("http://www.w3.org/2000/svg","g"),u=function(r){if(n.isObject(r)&&n.has("sync")){var e=r.sync;return t.get(e)}return r},i=n.map(r.pop(),u),o=n.map(r,u);return o.push(i),o.unshift(d3.select(e)),u.apply(null,o)})}return{register_glyph:r}}),r("parser/sheet",["underscore","core"],function(n,t){function r(r,e,u){e.shift(),t.register_parser(r,e,u,function(){var r=[].slice.call(arguments,0),e=document.createElementNS("http://www.w3.org/2000/svg","g"),u=function(r){if(n.isObject(r)&&n.has("sync")){var e=r.sync;return t.get(e)}return r},i=n.map(r.pop(),u),o=n.map(r,u);return o.push(i),o.unshift(d3.select(e)),u.apply(null,o)})}return{register_sheet:r}}),r("utils/dataframe",["underscore"],function(n){function t(t,r){this.raw=r;var e=n.keys(r[0]),u=n.zip.apply(this,n.map(r,function(t){return n.toArray(t)})),i=n.filter(u,function(t){return n.all(t,function(t){return n.isArray(t)})});return this.nested=1==i.length?e[u.indexOf(i[0])]:!1,this.filters={},this}return t.prototype.row=function(n){return this.raw[n]},t.prototype.column=function(t){var r=[],e=this.raw;return n.each(e,function(n){r.push(n[t])}),r},t.prototype.scale=function(t,r){if(this.isContinuous(t)){var e=this.columnRange(t);return e=n.range(e.min,e.max+1,(e.max-e.min)/(r.length-1)),d3.scale.linear().domain(e).range(r)}return d3.scale.ordinal().domain(n.uniq(this.column(t))).range(r)},t.prototype.isContinuous=function(t){return n.every(this.column(t),function(t){return n.isNumber(t)})},t.prototype.addFilter=function(n,t,r){this.filters[n]={func:t,excepts:r}},t.prototype.columnWithFilters=function(t,r){var e=this.raw.concat();return n.each(this.filters,function(r,u){(-1==r.excepts.indexOf("self")||u!=t)&&(t in r.excepts||(e=n.filter(e,r.func)))}),n.map(e,function(n){return n[r]})},t.prototype.pickUpCells=function(t,r){var e=this.column(t);return n.map(r,function(n){return e[n]})},t.prototype.getPartialDf=function(t){return n.map(this.raw,function(r){return n.reduce(t,function(n,t){return n[t]=r[t],n},{})})},t.prototype.nested_column=function(n,r){if(!this.nested)throw"Recieved dataframe is not nested.";var e=new t("",this.row(n)[this.nested]);return e.column(r)},t.prototype.columnRange=function(n){var t=this.column(n);return{max:d3.max(t,function(n){return n}),min:d3.min(t,function(n){return n})}},t}),r("main",["require","exports","module","core","parser/glyph","parser/sheet","utils/dataframe"],function(n){return{core:n("core"),glyph_manager:n("parser/glyph"),sheet_manager:n("parser/sheet"),dataframe:n("utils/dataframe")}}),t("main")});