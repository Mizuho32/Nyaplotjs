/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.6.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     uuid.js
//
//     Copyright (c) 2010-2012 Robert Kieffer
//     MIT License - http://opensource.org/licenses/mit-license.php

!function(t,e){t.Nyaplot=e()}(this,function(){var t,e,n;return function(r){function i(t,e){return _.call(t,e)}function o(t,e){var n,r,i,o,a,u,l,s,c,d,f,p=e&&e.split("/"),h=y.map,g=h&&h["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=t.split("/"),a=t.length-1,y.nodeIdCompat&&b.test(t[a])&&(t[a]=t[a].replace(b,"")),t=p.concat(t),c=0;c<t.length;c+=1)if(f=t[c],"."===f)t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||g)&&h){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),p)for(d=p.length;d>0;d-=1)if(i=h[p.slice(0,d).join("/")],i&&(i=i[r])){o=i,u=c;break}if(o)break;!l&&g&&g[r]&&(l=g[r],s=c)}!o&&l&&(o=l,u=s),o&&(n.splice(0,u,o),t=n.join("/"))}return t}function a(t,e){return function(){return p.apply(r,w.call(arguments,0).concat([t,e]))}}function u(t){return function(e){return o(e,t)}}function l(t){return function(e){m[t]=e}}function s(t){if(i(v,t)){var e=v[t];delete v[t],x[t]=!0,f.apply(r,e)}if(!i(m,t)&&!i(x,t))throw new Error("No "+t);return m[t]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var f,p,h,g,m={},v={},y={},x={},_=Object.prototype.hasOwnProperty,w=[].slice,b=/\.js$/;h=function(t,e){var n,r=c(t),i=r[0];return t=r[1],i&&(i=o(i,e),n=s(i)),i?t=n&&n.normalize?n.normalize(t,u(e)):o(t,e):(t=o(t,e),r=c(t),i=r[0],t=r[1],i&&(n=s(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},g={require:function(t){return a(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:d(t)}}},f=function(t,e,n,o){var u,c,d,f,p,y,_=[],w=typeof n;if(o=o||t,"undefined"===w||"function"===w){for(e=!e.length&&n.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(f=h(e[p],o),c=f.f,"require"===c)_[p]=g.require(t);else if("exports"===c)_[p]=g.exports(t),y=!0;else if("module"===c)u=_[p]=g.module(t);else if(i(m,c)||i(v,c)||i(x,c))_[p]=s(c);else{if(!f.p)throw new Error(t+" missing "+c);f.p.load(f.n,a(o,!0),l(c),{}),_[p]=m[c]}d=n?n.apply(m[t],_):void 0,t&&(u&&u.exports!==r&&u.exports!==m[t]?m[t]=u.exports:d===r&&y||(m[t]=d))}else t&&(m[t]=n)},t=e=p=function(t,e,n,i,o){if("string"==typeof t)return g[t]?g[t](e):s(h(t,e).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=i,i=o),i?f(r,t,e,n):setTimeout(function(){f(r,t,e,n)},4),p},p.config=function(t){return p(t)},t._defined=m,n=function(t,e,n){e.splice||(n=e,e=[]),i(m,t)||i(v,t)||(v[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../contrib/almond/almond",function(){}),function(){var t=this,e=t._,r={},i=Array.prototype,o=Object.prototype,a=Function.prototype,u=i.push,l=i.slice,s=i.concat,c=o.toString,d=o.hasOwnProperty,f=i.forEach,p=i.map,h=i.reduce,g=i.reduceRight,m=i.filter,v=i.every,y=i.some,x=i.indexOf,_=i.lastIndexOf,w=Array.isArray,b=Object.keys,k=a.bind,A=function(t){return t instanceof A?t:this instanceof A?void(this._wrapped=t):new A(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):t._=A,A.VERSION="1.6.0";var M=A.each=A.forEach=function(t,e,n){if(null==t)return t;if(f&&t.forEach===f)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(n,t[i],i,t)===r)return}else for(var a=A.keys(t),i=0,o=a.length;o>i;i++)if(e.call(n,t[a[i]],a[i],t)===r)return;return t};A.map=A.collect=function(t,e,n){var r=[];return null==t?r:p&&t.map===p?t.map(e,n):(M(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var D="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(e=A.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(M(t,function(t,o,a){i?n=e.call(r,n,t,o,a):(n=t,i=!0)}),!i)throw new TypeError(D);return n},A.reduceRight=A.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return r&&(e=A.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var a=A.keys(t);o=a.length}if(M(t,function(u,l,s){l=a?a[--o]:--o,i?n=e.call(r,n,t[l],l,s):(n=t[l],i=!0)}),!i)throw new TypeError(D);return n},A.find=A.detect=function(t,e,n){var r;return j(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},A.filter=A.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(M(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},A.reject=function(t,e,n){return A.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var i=!0;return null==t?i:v&&t.every===v?t.every(e,n):(M(t,function(t,o,a){return(i=i&&e.call(n,t,o,a))?void 0:r}),!!i)};var j=A.some=A.any=function(t,e,n){e||(e=A.identity);var i=!1;return null==t?i:y&&t.some===y?t.some(e,n):(M(t,function(t,o,a){return i||(i=e.call(n,t,o,a))?r:void 0}),!!i)};A.contains=A.include=function(t,e){return null==t?!1:x&&t.indexOf===x?-1!=t.indexOf(e):j(t,function(t){return t===e})},A.invoke=function(t,e){var n=l.call(arguments,2),r=A.isFunction(e);return A.map(t,function(t){return(r?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,A.property(e))},A.where=function(t,e){return A.filter(t,A.matches(e))},A.findWhere=function(t,e){return A.find(t,A.matches(e))},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return M(t,function(t,o,a){var u=e?e.call(n,t,o,a):t;u>i&&(r=t,i=u)}),r},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return M(t,function(t,o,a){var u=e?e.call(n,t,o,a):t;i>u&&(r=t,i=u)}),r},A.shuffle=function(t){var e,n=0,r=[];return M(t,function(t){e=A.random(n++),r[n-1]=r[e],r[e]=t}),r},A.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=A.values(t)),t[A.random(t.length-1)]):A.shuffle(t).slice(0,Math.max(0,e))};var z=function(t){return null==t?A.identity:A.isFunction(t)?t:A.property(t)};A.sortBy=function(t,e,n){return e=z(e),A.pluck(A.map(t,function(t,r,i){return{value:t,index:r,criteria:e.call(n,t,r,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var S=function(t){return function(e,n,r){var i={};return n=z(n),M(e,function(o,a){var u=n.call(r,o,a,e);t(i,u,o)}),i}};A.groupBy=S(function(t,e,n){A.has(t,e)?t[e].push(n):t[e]=[n]}),A.indexBy=S(function(t,e,n){t[e]=n}),A.countBy=S(function(t,e){A.has(t,e)?t[e]++:t[e]=1}),A.sortedIndex=function(t,e,n,r){n=z(n);for(var i=n.call(r,e),o=0,a=t.length;a>o;){var u=o+a>>>1;n.call(r,t[u])<i?o=u+1:a=u}return o},A.toArray=function(t){return t?A.isArray(t)?l.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:l.call(t,0,e)},A.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var O=function(t,e,n){return e&&A.every(t,A.isArray)?s.apply(n,t):(M(t,function(t){A.isArray(t)||A.isArguments(t)?e?u.apply(n,t):O(t,e,n):n.push(t)}),n)};A.flatten=function(t,e){return O(t,e,[])},A.without=function(t){return A.difference(t,l.call(arguments,1))},A.partition=function(t,e){var n=[],r=[];return M(t,function(t){(e(t)?n:r).push(t)}),[n,r]},A.uniq=A.unique=function(t,e,n,r){A.isFunction(e)&&(r=n,n=e,e=!1);var i=n?A.map(t,n,r):t,o=[],a=[];return M(i,function(n,r){(e?r&&a[a.length-1]===n:A.contains(a,n))||(a.push(n),o.push(t[r]))}),o},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(t){var e=l.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.contains(e,t)})})},A.difference=function(t){var e=s.apply(i,l.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=A.max(A.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=A.pluck(arguments,""+n);return e},A.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=A.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(x&&t.indexOf===x)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(_&&t.lastIndexOf===_)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var q=function(){};A.bind=function(t,e){var n,r;if(k&&t.bind===k)return k.apply(t,l.call(arguments,1));if(!A.isFunction(t))throw new TypeError;return n=l.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(l.call(arguments)));q.prototype=t.prototype;var i=new q;q.prototype=null;var o=t.apply(i,n.concat(l.call(arguments)));return Object(o)===o?o:i}},A.partial=function(t){var e=l.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===A&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},A.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return M(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var r=e.apply(this,arguments);return A.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},A.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(l.call(arguments,1)))},A.throttle=function(t,e,n){var r,i,o,a=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:A.now(),a=null,o=t.apply(r,i),r=i=null};return function(){var s=A.now();u||n.leading!==!1||(u=s);var c=e-(s-u);return r=this,i=arguments,0>=c?(clearTimeout(a),a=null,u=s,o=t.apply(r,i),r=i=null):a||n.trailing===!1||(a=setTimeout(l,c)),o}},A.debounce=function(t,e,n){var r,i,o,a,u,l=function(){var s=A.now()-a;e>s?r=setTimeout(l,e-s):(r=null,n||(u=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=A.now();var s=n&&!r;return r||(r=setTimeout(l,e)),s&&(u=t.apply(o,i),o=i=null),u}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return A.partial(e,t)},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=function(t){if(!A.isObject(t))return[];if(b)return b(t);var e=[];for(var n in t)A.has(t,n)&&e.push(n);return e},A.values=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},A.pairs=function(t){for(var e=A.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},A.invert=function(t){for(var e={},n=A.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return M(l.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=s.apply(i,l.call(arguments,1));return M(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=s.apply(i,l.call(arguments,1));for(var r in t)A.contains(n,r)||(e[r]=t[r]);return e},A.defaults=function(t){return M(l.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var F=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var i=c.call(t);if(i!=c.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var a=t.constructor,u=e.constructor;if(a!==u&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var l=0,s=!0;if("[object Array]"==i){if(l=t.length,s=l==e.length)for(;l--&&(s=F(t[l],e[l],n,r)););}else{for(var d in t)if(A.has(t,d)&&(l++,!(s=A.has(e,d)&&F(t[d],e[d],n,r))))break;if(s){for(d in e)if(A.has(e,d)&&!l--)break;s=!l}}return n.pop(),r.pop(),s};A.isEqual=function(t,e){return F(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=w||function(t){return"[object Array]"==c.call(t)},A.isObject=function(t){return t===Object(t)},M(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return d.call(t,e)},A.noConflict=function(){return t._=e,this},A.identity=function(t){return t},A.constant=function(t){return function(){return t}},A.property=function(t){return function(e){return e[t]}},A.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},A.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},A.now=Date.now||function(){return(new Date).getTime()};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};E.unescape=A.invert(E.escape);var T={escape:new RegExp("["+A.keys(E.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(E.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace(T[t],function(e){return E[t][e]})}}),A.result=function(t,e){if(null==t)return void 0;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){M(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),L.call(this,n.apply(A,t))}})};var B=0;A.uniqueId=function(t){var e=++B+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var r;n=A.defaults({},n,A.templateSettings);var i=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,r,i,u){return a+=t.slice(o,u).replace(I,function(t){return"\\"+R[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=u+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(u){throw u.source=a,u}if(e)return r(e,A);var l=function(t){return r.call(this,t,A)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},A.chain=function(t){return A(t).chain()};var L=function(t){return this._chain?A(t).chain():t};A.mixin(A),M(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),M(["concat","join","slice"],function(t){var e=i[t];A.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof n&&n.amd&&n("underscore",[],function(){return A})}.call(this),n("core/manager",["underscore"],function(t){var e={data_frames:{},panes:[]};return e.addData=function(e,n){var r={};r[e]=n,t.extend(this.data_frames,r)},e.getData=function(t){return this.data_frames[t]},e.addPane=function(t){this.panes.push(t)},e.update=function(e){if(arguments.length>0){var n=t.filter(this.panes,function(t){return t.uuid==e});t.each(n,function(t){t.pane.update()})}else t.each(this.panes,function(t){t.pane.update()})},e}),n("core/extension",["underscore"],function(){var t={},e={};return t.load=function(t){if("undefined"!=typeof window[t]&&"undefined"!=typeof window[t].Nya){var n=window[t].Nya;"undefined"!=typeof n.pane,"undefined"!=typeof n.diagrams,"undefined"!=typeof n.scale,e[t]=n}},t.pane=function(t){return e[t].pane},t}),function(){function t(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(e[r+i++]=h[t])});16>i;)e[r+i++]=0;return e}function r(t,e){var n=e||0,r=p;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function i(t,e,n){var i=e&&n||0,o=e||[];t=t||{};var a=null!=t.clockseq?t.clockseq:y,u=null!=t.msecs?t.msecs:(new Date).getTime(),l=null!=t.nsecs?t.nsecs:_+1,s=u-x+(l-_)/1e4;if(0>s&&null==t.clockseq&&(a=a+1&16383),(0>s||u>x)&&null==t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=u,_=l,y=a,u+=122192928e5;var c=(1e4*(268435455&u)+l)%4294967296;o[i++]=c>>>24&255,o[i++]=c>>>16&255,o[i++]=c>>>8&255,o[i++]=255&c;var d=u/4294967296*1e4&268435455;o[i++]=d>>>8&255,o[i++]=255&d,o[i++]=d>>>24&15|16,o[i++]=d>>>16&255,o[i++]=a>>>8|128,o[i++]=255&a;for(var f=t.node||v,p=0;6>p;p++)o[i+p]=f[p];return e?e:r(o)}function o(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new f(16):null,t=null),t=t||{};var o=t.random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var u=0;16>u;u++)e[i+u]=o[u];return e||r(o)}var a,u=this;if("function"==typeof e)try{var l=e("crypto").randomBytes;a=l&&function(){return l(16)}}catch(s){}if(!a&&u.crypto&&crypto.getRandomValues){var c=new Uint8Array(16);a=function(){return crypto.getRandomValues(c),c}}if(!a){var d=new Array(16);a=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),d[e]=t>>>((3&e)<<3)&255;return d}}for(var f="function"==typeof Buffer?Buffer:Array,p=[],h={},g=0;256>g;g++)p[g]=(g+256).toString(16).substr(1),h[p[g]]=g;var m=a(),v=[1|m[0],m[1],m[2],m[3],m[4],m[5]],y=16383&(m[6]<<8|m[7]),x=0,_=0,w=o;if(w.v1=i,w.v4=o,w.parse=t,w.unparse=r,w.BufferClass=f,"function"==typeof n&&n.amd)n("node-uuid",[],function(){return w});else if("undefined"!=typeof module&&module.exports)module.exports=w;else{var b=u.uuid;w.noConflict=function(){return u.uuid=b,w},u.uuid=w}}.call(this),n("view/components/legend/simple_legend",["underscore","core/manager"],function(t){function e(e,n){var r={title:"",width:150,height:22,title_height:15,mode:"normal"};return arguments.length>1&&t.extend(r,n),this.model=d3.select(document.createElementNS("http://www.w3.org/2000/svg","g")),this.options=r,this.data=e,this}return e.prototype.width=function(){return this.options.width},e.prototype.height=function(){return this.options.height*(this.data.length+1)},e.prototype.getDomObject=function(){var t=this.model,e=this.options;t.append("text").attr("x",12).attr("y",e.height).attr("font-size","14").text(e.title);var n=this.model.selectAll("g").data(this.data).enter().append("g"),r=n.append("circle").attr("cx","8").attr("cy",function(t,n){return e.height*(n+1)}).attr("r","6").attr("stroke",function(t){return t.color}).attr("stroke-width","2").attr("fill",function(t){return t.color}).attr("fill-opacity",function(t){return"off"==t.mode?0:1});switch(e.mode){case"normal":r.on("click",function(t){if(t.on||t.off){var e=d3.select(this);1==e.attr("fill-opacity")?(e.attr("fill-opacity",0),t.off()):(e.attr("fill-opacity",1),t.on())}});break;case"radio":r.on("click",function(t){var e=d3.select(this);if(0==e.attr("fill-opacity")){var n=this;r.filter(function(t){return this!=n&&!(!t.on&&!t.off)}).attr("fill-opacity",0),e.attr("fill-opacity",1),t.on()}})}return r.style("cursor",function(t){return void 0==t.on&&void 0==t.off?"default":"pointer"}),n.append("text").attr("x","18").attr("y",function(t,n){return e.height*(n+1)+4}).attr("font-size","12").text(function(t){return t.label}),t},e}),n("view/diagrams/bar",["underscore","node-uuid","core/manager","view/components/legend/simple_legend"],function(t,e,n,r){function i(e,r,i,o){var a={value:null,x:null,y:null,width:.9,color:null,hover:!0,tooltip_contents:null,tooltip:null};arguments.length>3&&t.extend(a,o);var u,l=n.getData(i);u=null==a.color?d3.scale.category20b():d3.scale.ordinal().range(a.color),this.color_scale=u;var s,c=e.append("g"),d=[];if(null!=a.value){var f=l.column(a.value);s=t.uniq(f)}else s=l.column(a.x);return t.each(s,function(t){d.push({label:t,color:u(t)})}),this.model=c,this.scales=r,this.options=a,this.legend_data=d,this.df=l,this.df_id=i,this.uuid=a.uuid,this}return i.prototype.update=function(){var t;if(null!==this.options.value){var e=this.df.columnWithFilters(this.uuid,this.options.value),n=this.countData(e);t=this.proceedData(n.x,n.y,this.options)}else{var r=this.df.columnWithFilters(this.uuid,this.options.x),i=this.df.columnWithFilters(this.uuid,this.options.y);t=this.proceedData(r,i,this.options)}var o=this.model.selectAll("rect").data(t);void 0==o[0][0]&&o.enter().append("rect").attr("height",0).attr("y",this.scales.y(0)),this.updateModels(o,this.scales,this.options)},i.prototype.proceedData=function(e,n){return t.map(t.zip(e,n),function(t){return{x:t[0],y:t[1]}})},i.prototype.updateModels=function(t,n,r){var i=this.color_scale,o=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(i(t.x)).darker(1)});var t=d3.select(this).attr("id");r.tooltip.addToYAxis(t,this.__data__.y),r.tooltip.update()},a=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return i(t.x)});var t=d3.select(this).attr("id");r.tooltip.remove(t),r.tooltip.update()},u=n.x.rangeBand()*r.width,l=n.x.rangeBand()*((1-r.width)/2);t.attr("x",function(t){return n.x(t.x)+l}).attr("width",u).attr("fill",function(t){return i(t.x)}).transition().duration(200).attr("y",function(t){return n.y(t.y)}).attr("height",function(t){return n.y(0)-n.y(t.y)}).attr("id",e.v4()),r.hover&&t.on("mouseover",o).on("mouseout",a)},i.prototype.getLegend=function(){return new r(this.legend_data)},i.prototype.countData=function(e){var n={};return t.each(e,function(t){n[t]=n[t]||0,n[t]+=1}),{x:t.keys(n),y:t.values(n)}},i.prototype.checkSelectedData=function(){},i}),n("view/components/filter",["underscore","core/manager"],function(t){function e(e,n,r,i){var o={opacity:.125,color:"gray"};arguments.length>2&&t.extend(o,i);var a=function(){var t={x:u.empty()?n.x.domain():u.extent(),y:n.y.domain()};r(t)},u=d3.svg.brush().x(n.x).on("brushend",a),l=e.append("g"),s=d3.max(n.y.range())-d3.min(n.y.range()),c=d3.min(n.y.range());return l.call(u).selectAll("rect").attr("y",c).attr("height",s).style("fill-opacity",o.opacity).style("fill",o.color).style("shape-rendering","crispEdges"),this}return e}),n("view/diagrams/histogram",["underscore","node-uuid","core/manager","view/components/filter","view/components/legend/simple_legend"],function(t,e,n,r,i){function o(e,r,i,o){var a={title:"histogram",value:null,bin_num:20,width:.9,color:"steelblue",stroke_color:"black",stroke_width:1,hover:!0,tooltip:null};arguments.length>3&&t.extend(a,o);var u=n.getData(i),l=e.append("g");return this.scales=r,this.legends=[{label:a.title,color:a.color}],this.options=a,this.model=l,this.df=u,this.uuid=a.uuid,this}return o.prototype.update=function(){var t=this.df.columnWithFilters(this.uuid,this.options.value),e=this.proceedData(t,this.options),n=this.model.selectAll("rect").data(e);void 0==n[0][0]&&(n=n.enter().append("rect").attr("height",0).attr("y",this.scales.y(0))),this.updateModels(n,this.scales,this.options)},o.prototype.proceedData=function(t,e){return d3.layout.histogram().bins(this.scales.x.ticks(e.bin_num))(t)},o.prototype.updateModels=function(t,n,r){var i=function(){d3.select(this).transition().duration(200).attr("fill",d3.rgb(r.color).darker(1));var t=d3.select(this).attr("id");r.tooltip.addToYAxis(t,this.__data__.y,3),r.tooltip.update()},o=function(){d3.select(this).transition().duration(200).attr("fill",r.color);var t=d3.select(this).attr("id");r.tooltip.remove(t),r.tooltip.update()};t.attr("x",function(t){return n.x(t.x)}).attr("width",function(t){return n.x(t.dx)-n.x(0)}).attr("fill",r.color).attr("stroke",r.stroke_color).attr("stroke-width",r.stroke_width).attr("clip-path","url(#"+this.options.clip_id+")").transition().duration(200).attr("y",function(t){return n.y(t.y)}).attr("height",function(t){return n.y(0)-n.y(t.y)}).attr("id",e.v4()),r.hover&&t.on("mouseover",i).on("mouseout",o)},o.prototype.getLegend=function(){return new i(this.legend_data)},o.prototype.checkSelectedData=function(t){var e=this.options.value,r=function(n){var r=n[e];return r>t.x[0]&&r<t.x[1]?!0:!1};this.df.addFilter(this.uuid,r,["self"]),n.update()},o}),n("view/diagrams/scatter",["underscore","node-uuid","core/manager","view/components/filter","view/components/legend/simple_legend"],function(t,e,n,r,i){function o(e,r,i,o){var a={title:"scatter",x:null,y:null,r:5,shape:"circle",color:"steelblue",stroke_color:"black",stroke_width:1,hover:!0,tooltip_contents:[],tooltip:null};arguments.length>3&&t.extend(a,o),this.scales=r;var u=n.getData(i),l=e.append("g");return this.legend_data=function(t){var e=function(){t.render=!0,t.update()},n=function(){t.render=!1,t.update()};return[{label:a.title,color:a.color,on:e,off:n}]}(this),this.render=!0,this.options=a,this.model=l,this.df=u,this.df_id=i,this.uuid=a.uuid,this}return o.prototype.update=function(){var t=this.proceedData(this.options);if(this.render){var e=this.model.selectAll("circle").data(t);void 0==e[0][0]&&e.enter().append("circle").attr("r",0),this.updateModels(e,this.scales,this.options)}else this.model.selectAll("circle").remove()},o.prototype.proceedData=function(e){var n=this.df,r=n.column(this.options.x),i=n.column(this.options.y);if(e.tooltip_contents.length>0){var o=t.map(e.tooltip_contents,function(t){return n.column(t)});return o=t.zip.apply(t,o),o=t.map(o,function(n){return t.reduce(n,function(t,n,r){return t[e.tooltip_contents[r]]=n,t},{})}),t.map(t.zip(r,i,o),function(t){return{x:t[0],y:t[1],tt:t[2]}})}return t.map(t.zip(r,i),function(t){return{x:t[0],y:t[1]}})},o.prototype.updateModels=function(t,n,r){var i=(this.df,function(){d3.select(this).transition().duration(200).attr("fill",d3.rgb(r.color).darker(1));var t=d3.select(this).attr("id");r.tooltip.addToXAxis(t,this.__data__.x,3),r.tooltip.addToYAxis(t,this.__data__.y,3),r.tooltip_contents.length>0&&r.tooltip.add(t,this.__data__.x,this.__data__.y,"top",this.__data__.tt),r.tooltip.update()}),o=function(){d3.select(this).transition().duration(200).attr("fill",r.color);var t=d3.select(this).attr("id");r.tooltip.remove(t),r.tooltip.update()};t.attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("fill",r.color).attr("stroke",r.stroke_color).attr("stroke-width",r.stroke_width).attr("clip-path","url(#"+this.options.clip_id+")").transition().duration(200).attr("r",r.r).attr("id",e.v4()),r.hover&&t.on("mouseover",i).on("mouseout",o)},o.prototype.getLegend=function(){return new i(this.legend_data)},o.prototype.updateData=function(){this.df=n.getData(this.df_id);var t=this.proceedData(this.df.column(this.options.value),this.options),e=this.model.selectAll("circle").data(t);this.updateModels(e,this.scales,this.options)},o.prototype.checkSelectedData=function(){},o}),n("view/diagrams/line",["underscore","core/manager","view/components/filter","view/components/legend/simple_legend"],function(t,e,n,r){function i(n,r,i,o){var a={x:null,y:null,title:"line",color:"steelblue",stroke_width:2};arguments.length>3&&t.extend(a,o),this.scales=r;var u=e.getData(i),l=n.append("g");return this.legend_data=function(t){var e=function(){t.render=!0,t.update()},n=function(){t.render=!1,t.update()};return[{label:a.title,color:a.color,on:e,off:n}]}(this),this.render=!0,this.options=a,this.model=l,this.df=u,this.df_id=i,this}return i.prototype.update=function(){if(this.render){var t=this.proceedData(this.df.column(this.options.x),this.df.column(this.options.y),this.options);this.model.selectAll("path").remove();var e=this.model.append("path").attr("clip-path","url(#"+this.options.clip_id+")").datum(t);this.updateModels(e,this.scales,this.options)}else this.model.selectAll("path").remove()},i.prototype.proceedData=function(e,n){return t.map(t.zip(e,n),function(t){return{x:t[0],y:t[1]}})},i.prototype.updateModels=function(t,e,n){var r=d3.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)});t.attr("d",r).attr("stroke",n.color).attr("stroke-width",n.stroke_width).attr("fill","none")},i.prototype.getLegend=function(){var t=new r(this.legend_data);return t},i.prototype.updateData=function(){this.df=e.getData(this.df_id);var t=this.proceedData(this.df.column(this.options.value),this.options),n=this.model.selectAll("path").datum(t);this.updateModels(n,this.scales,this.options)},i.prototype.checkSelectedData=function(){},i}),n("utils/simplex",["underscore"],function(t){function e(e){var n=[];return t.each(t.zip.apply(null,e),function(e,r){n[r]=0,t.each(e,function(t){n[r]+=t}),n[r]=n[r]/e.length}),n}function n(r,s){r=t.sortBy(r,function(t){return s(t)});for(var c=r.length,d=r[0].length,f=r[c-1],p=r[c-2],h=r[0],g=e(r.concat().splice(0,c-1)),m=[],v=0;d>v;v++)m[v]=2*g[v]-f[v];if(s(m)>=s(f))for(var v=0;d>v;v++)r[c-1][v]=(1-i)*f[v]+i*m[v];else if(s(m)<(s(h)+(o-1)*s(f))/o){for(var y=[],v=0;d>v;v++)y[v]=o*m[v]-(o-1)*f[v];r[c-1]=s(y)<=s(m)?y:m}else r[c-1]=m;s(r[c-1])>=s(p)&&t.each(r,function(t,e){for(var n=0;d>n;n++)r[e][n]=.5*(t[n]+h[n])});var x=0;return t.each(r,function(t){x+=Math.pow(s(t)-s(h),2)}),a>x?r[c-1]:(u++,u>l?r[c-1]:n(r,s))}function r(e,r){var i=1,o=e.length,a=[e];return t.each(t.range(o),function(t){var n=e.concat();n[t]+=i,a.push(n)}),n(a,r)}var i=.7,o=1.5,a=1e-20,u=0,l=2e3;return r}),n("view/diagrams/venn",["underscore","core/manager","view/components/filter","view/components/legend/simple_legend","utils/simplex"],function(t,e,n,r,i){function o(n,i,o,a){var u={category:null,count:null,color:null,stroke_color:"#000",stroke_width:1,opacity:.7,hover:!1,area_names:["VENN1","VENN2","VENN3"],filter_control:!1};arguments.length>3&&t.extend(u,a);var l,s=e.getData(o),c=n.append("g"),d=s.column(u.category),f=t.uniq(d);l=null==u.color?d3.scale.category20().domain(u.area_names):d3.scale.ordinal().range(u.color).domain(u.area_names),this.color_scale=l;
for(var p=[],h=[[f[0]],[f[1]],[f[2]]],g=this.update,m=this.tellUpdate,v=this,y=0;3>y;y++){var x=[];x.push({label:u.area_names[y],color:l(u.area_names[y])}),t.each(f,function(t){var e=y,n=function(){h[e].push(t),g.call(v),m.call(v)},r=function(){var n=h[e].indexOf(t);h[e].splice(n,1),g.call(v),m.call(v)},i=t==h[y]?"on":"off";x.push({label:t,color:"black",mode:i,on:n,off:r})}),p.push(new r(x))}var _="all";if(u.filter_control){var x=[],w=["all","overlapping","non-overlapping"],b=_;x.push({label:"Filter",color:"gray"}),t.each(w,function(t){var e=function(){v.filter_mode=t,g.call(v),m.call(v)},n=t==b?"on":"off";x.push({label:t,color:"black",on:e,off:function(){},mode:n})}),p.push(new r(x,{mode:"radio"}))}return this.selected_category=h,this.filter_mode=_,this.legend_data=p,this.options=u,this.scales=i,this.model=c,this.df_id=o,this.df=s,this.uuid=u.uuid,this.tellUpdate(),this}return o.prototype.getScales=function(e,n){var r=t.max(n.x.range())-t.min(n.x.range()),i=t.max(n.y.range())-t.min(n.y.range()),o={min:function(){var n=t.min(e.pos,function(t){return t.x-t.r});return n.x-n.r}(),max:function(){var n=t.max(e.pos,function(t){return t.x+t.r});return n.x+n.r}()},a={min:function(){var n=t.min(e.pos,function(t){return t.y-t.r});return n.y-n.r}(),max:function(){var n=t.max(e.pos,function(t){return t.y+t.r});return n.y+n.r}()},u=o.max-o.min,l=a.max-a.min,s=0;if(r/i>u/l){s=l/i;var c=s*r;o.min-=(c-u)/2,o.max+=(c-u)/2}else{s=u/r;var d=s*i;l.min-=(d-l)/2,l.max+=(d-l)/2}var f={};return f.x=d3.scale.linear().range(n.x.range()).domain([o.min,o.max]),f.y=d3.scale.linear().range(n.y.range()).domain([a.min,a.max]),f.r=d3.scale.linear().range([0,100]).domain([0,100*s]),f},o.prototype.update=function(){var t=this.df.columnWithFilters(this.uuid,this.options.count),e=this.df.columnWithFilters(this.uuid,this.options.category),n=this.proceedData(e,t,this.selected_category),r=this.getScales(n,this.scales),i=this.model.selectAll("circle").data(n.pos),o=this.model.selectAll("text").data(n.labels);void 0==i[0][0]&&(i=i.enter().append("circle")),void 0==o[0][0]&&(o=o.enter().append("text")),this.counted_items=n.counted_items,this.updateModels(i,r,this.options),this.updateLabels(o,r,this.options)},o.prototype.proceedData=function(e,n,r){for(var o=(function(){for(var i=[],o=function(){var i={};return t.each(t.zip(e,n),function(e){void 0==i[e[1]]&&(i[e[1]]={}),t.each(r,function(t,n){-1!=t.indexOf(e[0])&&(i[e[1]][n]=!0)})}),i}(),a=(function(e){var n=0;return t.each(t.values(o),function(r){t.some(e,function(t){return!(t in r)})||n++}),n}),u=0;3>u;u++){i[u]=[],i[u][u]=a([u]);for(var l=u+1;3>l;l++){var s=a([u,l]);i[u][l]=s}}return{table:i,counted_items:o}}()),a=o.table,u=o.counted_items,l=t.map(a,function(t,e){return Math.sqrt(a[e][e]/(2*Math.PI))}),s=function(e){for(var n=0,r=0;r<e.length;r+=2)for(var i=r+2;i<e.length;i+=2){var o=e[r],u=e[r+1],s=e[i],c=e[i+1],d=l[r/2],f=l[i/2],p=Math.sqrt(Math.pow(o-s,2)+Math.pow(u-c,2)),h=0;p>d+f?h=0:t.each([[d,f],[f,d]],function(t){var e=Math.acos((t[1]*t[1]-t[0]*t[0]+p*p)/(2*t[1]*p)),n=t[r]*t[r]*e-.5*t[1]*t[1]*Math.sin(2*e);h+=n}),n+=Math.pow(a[r/2][i/2]-h,2)}return n},c=function(){var e=[],n=a[0].length,r=t.max(a,function(t,e){for(var n=0,r=0;e>r;r++)n+=a[r][e];for(var r=e+1;r<t.length;r++)n+=a[e][r];return n}),i=n-r.length;e[2*i]=0,e[2*i+1]=0;for(var o=0,u=Math.PI/(1.5*(n-1)),s=0;n>s;s++)if(s!=i){var c=l[i]+l[s]/2;e[2*s]=c*Math.sin(o),e[2*s+1]=c*Math.cos(o),o+=u}return e}(),d=i(c,s),f=[],p=[],h=0;h<d.length;h+=2)f.push({x:d[h],y:d[h+1],r:l[h/2],id:h});for(var h=0;3>h;h++){p.push({x:d[2*h],y:d[2*h+1],val:a[h][h]});for(var g=h+1;3>g;g++){var m=(d[2*h]+d[2*g])/2,v=(d[2*h+1]+d[2*g+1])/2;p.push({x:m,y:v,val:a[h][g]})}}return{pos:f,labels:p,counted_items:u}},o.prototype.updateModels=function(t,e,n){var r=this.color_scale,i=this.options.area_names;if(t.attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("stroke",n.stroke_color).attr("stroke-width",n.stroke_width).attr("fill",function(t){return r(i[t.id])}).attr("fill-opacity",n.opacity).transition().duration(500).attr("r",function(t){return e.r(t.r)}),n.hover){var o=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(r(i[t.id])).darker(1)})},a=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return r(i[t.id])})};t.on("mouseover",o).on("mouseout",a)}},o.prototype.updateLabels=function(t,e){t.attr("x",function(t){return e.x(t.x)}).attr("y",function(t){return e.y(t.y)}).attr("text-anchor","middle").text(function(t){return String(t.val)})},o.prototype.getLegend=function(){return this.legend_data},o.prototype.tellUpdate=function(){var n=this.selected_category,r=this.counted_items,i=this.filter_mode,o=this.options.category,a=this.options.count,u={all:function(e){return t.some(n,function(t){return-1!=t.indexOf(e[o])?!0:!1})},overlapping:function(e){if(!t.some(n,function(t){return-1!=t.indexOf(e[o])?!0:!1}))return!1;for(var i=0;3>i;i++)for(var u=i+1;3>u;u++)if(r[e[a]][i]&&r[e[a]][u])return!0;return!1},"non-overlapping":function(e){if(!t.some(n,function(t){return-1!=t.indexOf(e[o])?!0:!1}))return!1;for(var i=0;3>i;i++)for(var u=i+1;3>u;u++)if(r[e[a]][i]&&r[e[a]][u])return!1;return!0}}[i];this.df.addFilter(this.uuid,u,["self"]),e.update()},o}),n("view/diagrams/multiple_venn",["underscore","core/manager","view/components/filter","utils/simplex"],function(t,e,n,r){function i(n,r,i,o){var a={category:null,count:null,color:null,stroke_color:"#000",stroke_width:1,opacity:.7,hover:!1};arguments.length>3&&t.extend(a,o),this.getScales=function(e,n){var r=t.max(n.x.range())-t.min(n.x.range()),i=t.max(n.y.range())-t.min(n.y.range()),o={min:function(){var n=t.min(e.pos,function(t){return t.x-t.r});return n.x-n.r}(),max:function(){var n=t.max(e.pos,function(t){return t.x+t.r});return n.x+n.r}()},a={min:function(){var n=t.min(e.pos,function(t){return t.y-t.r});return n.y-n.r}(),max:function(){var n=t.max(e.pos,function(t){return t.y+t.r});return n.y+n.r}()},u=o.max-o.min,l=a.max-a.min,s=0;if(r/i>u/l){s=l/i;var c=s*r;o.min-=(c-u)/2,o.max+=(c-u)/2}else{s=u/r;var d=s*i;l.min-=(d-l)/2,l.max+=(d-l)/2}var f={};return f.x=d3.scale.linear().range(n.x.range()).domain([o.min,o.max]),f.y=d3.scale.linear().range(n.y.range()).domain([a.min,a.max]),f.r=d3.scale.linear().range([0,100]).domain([0,100*s]),f};var u=e.getData(i),l=this.proceedData(u.column(a.category),u.column(a.count)),s=this.getScales(l,r),c=n.append("g"),d=c.selectAll("circle").data(l.pos).enter().append("circle"),f=c.selectAll("text").data(l.labels).enter().append("text");this.color_scale=null==a.color?d3.scale.category20():d3.scale.ordinal().range(a.color);var p=this.color_scale;this.updateModels(d,s,a),this.updateLabels(f,s,a);var h=[];return t.each(l.pos,function(t){h.push({label:t.name,color:p(t.name)})}),this.legends=h,this.scales=r,this.options=a,this.model=c,this.df=u,this.df_id=i,this}return i.prototype.proceedData=function(e,n){for(var i=t.uniq(e),o=(function(){for(var r=[],o=function(){var r={};return t.each(t.zip(e,n),function(t){void 0==r[t[1]]&&(r[t[1]]={}),r[t[1]][t[0]]=!0}),t.values(r)}(),a=(function(e){var n=0;return t.each(o,function(r){t.some(e,function(t){return!(t in r)})||n++}),n}),u=0;u<i.length;u++){r[u]=[],r[u][u]=a([i[u]]);for(var l=u+1;l<i.length;l++){var s=a([i[u],i[l]]);r[u][l]=s}}return r}()),a=t.map(o,function(t,e){return Math.sqrt(o[e][e]/(2*Math.PI))}),u=function(e){for(var n=0,r=0;r<e.length;r+=2)for(var i=r+2;i<e.length;i+=2){var u=e[r],l=e[r+1],s=e[i],c=e[i+1],d=a[r/2],f=a[i/2],p=Math.sqrt(Math.pow(u-s,2)+Math.pow(l-c,2)),h=0;p>d+f?h=0:t.each([[d,f],[f,d]],function(t){var e=Math.acos((t[1]*t[1]-t[0]*t[0]+p*p)/(2*t[1]*p)),n=t[r]*t[r]*e-.5*t[1]*t[1]*Math.sin(2*e);h+=n}),n+=Math.pow(o[r/2][i/2]-h,2)}return n},l=function(){var e=[],n=o[0].length,r=t.max(o,function(t,e){for(var n=0,r=0;e>r;r++)n+=o[r][e];for(var r=e+1;r<t.length;r++)n+=o[e][r];return n}),i=n-r.length;e[2*i]=0,e[2*i+1]=0;for(var u=0,l=Math.PI/(1.5*(n-1)),s=0;n>s;s++)if(s!=i){var c=a[i]+a[s]/2;e[2*s]=c*Math.sin(u),e[2*s+1]=c*Math.cos(u),u+=l}return e}(),s=r(l,u),c=[],d=[],f=0;f<s.length;f+=2)c.push({x:s[f],y:s[f+1],r:a[f/2],name:i[f/2]});for(var f=0;f<i.length;f++){d.push({x:s[2*f],y:s[2*f+1],val:o[f][f]});for(var p=f+1;p<i.length;p++){var h=(s[2*f]+s[2*p])/2,g=(s[2*f+1]+s[2*p+1])/2;d.push({x:h,y:g,val:o[f][p]})}}return{pos:c,labels:d}},i.prototype.updateModels=function(t,e,n){var r=this.color_scale,i=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(r(t.name)).darker(1)})},o=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return r(t.name)})};t.attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("stroke",n.stroke_color).attr("stroke-width",n.stroke_width).attr("fill",function(t){return r(t.name)}).attr("fill-opacity",n.opacity).transition().duration(500).attr("r",function(t){return e.r(t.r)}),n.hover&&t.on("mouseover",i).on("mouseout",o)},i.prototype.updateLabels=function(t,e){t.attr("x",function(t){return e.x(t.x)}).attr("y",function(t){return e.y(t.y)}).attr("text-anchor","middle").text(function(t){return String(t.val)})},i.prototype.selected=function(t,e){var n=this.df.pickUpCells(this.options.count,e),r=this.df.pickUpCells(this.options.category,e),t=this.proceedData(r,n,this.options),i=this.getScales(t,this.scales),o=this.model.selectAll("circle").data(t.pos),a=this.model.selectAll("text").data(t.labels);this.updateModels(o,i,this.options),this.updateLabels(a,i,this.options)},i.prototype.update=function(){},i.prototype.checkSelectedData=function(){},i}),n("view/diagrams/box.js",["underscore","node-uuid","core/manager","view/components/filter","view/components/legend/simple_legend"],function(t,e,n,r){function i(e,r,i,o){var a={title:"",value:[],width:.9,color:null,stroke_color:"black",stroke_width:1,outlier_r:3,tooltip_contents:[],tooltip:null};arguments.length>3&&t.extend(a,o);var u,l=e.append("g"),s=n.getData(i);return u=null==a.color?d3.scale.category20b():d3.scale.ordinal().range(a.color),this.model=l,this.scales=r,this.options=a,this.df=s,this.color_scale=u,this.uuid=a.uuid,this}return i.prototype.update=function(){var e=this.uuid,n=this.proceedData,r=this.df,i=[];t.each(this.options.value,function(o){var a=r.columnWithFilters(e,o);i.push(t.extend(n(a),{x:o}))});var o=this.model.selectAll("g").data(i);o.enter().append("g"),this.updateModels(o,this.scales,this.options)},i.prototype.proceedData=function(e){var n=function(t){var e=t.length;return e%2==1?t[Math.floor(e/2)]:(t[e/2]+t[e/2+1])/2},r=t.sortBy(e),i=n(r),o=n(r.slice(0,r.length/2-1)),a=n(r.slice(r.length%2==0?r.length/2:r.length/2+1,r.length-1)),u=a-o,l=t.max(r)-a>1.5*u?a+1.5*u:t.max(r),s=o-t.min(r)>1.5*u?o-1.5*u:t.min(r),c=t.filter(r,function(t){return t>l||s>t});return{med:i,q1:o,q3:a,max:l,min:s,outlier:c}},i.prototype.updateModels=function(t,n,r){var i=n.x.rangeBand()*r.width,o=n.x.rangeBand()*((1-r.width)/2),a=this.color_scale,u=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(a(t.x)).darker(1)});var t=d3.select(this).attr("id");r.tooltip.addToYAxis(t,this.__data__.min,3),r.tooltip.addToYAxis(t,this.__data__.q1,3),r.tooltip.addToYAxis(t,this.__data__.med,3),r.tooltip.addToYAxis(t,this.__data__.q3,3),r.tooltip.addToYAxis(t,this.__data__.max,3),r.tooltip.update()},l=function(){d3.select(this).transition().duration(200).attr("fill",function(t){return d3.rgb(a(t.x))});var t=d3.select(this).attr("id");r.tooltip.remove(t),r.tooltip.update()};t.append("line").attr("x1",function(t){return n.x(t.x)+i/2+o}).attr("y1",function(t){return n.y(t.max)}).attr("x2",function(t){return n.x(t.x)+i/2+o}).attr("y2",function(t){return n.y(t.min)}).attr("stroke",r.stroke_color),t.append("rect").attr("x",function(t){return n.x(t.x)+o}).attr("y",function(t){return n.y(t.q3)}).attr("height",function(t){return n.y(t.q1)-n.y(t.q3)}).attr("width",i).attr("fill",function(t){return a(t.x)}).attr("stroke",r.stroke_color).attr("id",e.v4()).on("mouseover",u).on("mouseout",l),t.append("line").attr("x1",function(t){return n.x(t.x)+o}).attr("y1",function(t){return n.y(t.med)}).attr("x2",function(t){return n.x(t.x)+i+o}).attr("y2",function(t){return n.y(t.med)}).attr("stroke",r.stroke_color),t.append("g").each(function(t){d3.select(this).selectAll("circle").data(t.outlier).enter().append("circle").attr("cx",function(){return n.x(t.x)+i/2+o}).attr("cy",function(t){return n.y(t)}).attr("r",r.outlier_r).attr("clip-path","url(#"+r.clip_id+")")})},i.prototype.getLegend=function(){return new r(this.legend_data)},i.prototype.checkSelectedData=function(){},i}),n("view/diagrams/diagrams",["require","exports","module","view/diagrams/bar","view/diagrams/histogram","view/diagrams/scatter","view/diagrams/line","view/diagrams/venn","view/diagrams/multiple_venn","view/diagrams/box.js"],function(t){var e={};return e.bar=t("view/diagrams/bar"),e.histogram=t("view/diagrams/histogram"),e.scatter=t("view/diagrams/scatter"),e.line=t("view/diagrams/line"),e.venn=t("view/diagrams/venn"),e.multiple_venn=t("view/diagrams/multiple_venn"),e.box=t("view/diagrams/box.js"),e}),n("view/components/axis",["underscore","core/manager"],function(t,e){function n(n,r,i){var o={width:0,height:0,margin:{top:0,bottom:0,left:0,right:0},stroke_color:"#fff",stroke_width:1,x_label:"X",y_label:"Y",grid:!0,zoom:!1,zoom_range:[.5,5],pane_uuid:null};arguments.length>2&&t.extend(o,i);var a=d3.svg.axis().scale(r.x).orient("bottom"),u=d3.svg.axis().scale(r.y).orient("left");n.append("g").attr("class","x_axis"),n.append("g").attr("class","y_axis"),n.append("text").attr("x",o.width/2).attr("y",o.height+o.margin.bottom/1.5).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).style("font-family","sans-serif").text(o.x_label),n.append("text").attr("x",-o.margin.left/1.5).attr("y",o.height/2).attr("text-anchor","middle").attr("fill","rgb(50,50,50)").attr("font-size",22).attr("transform","rotate(-90,"+-o.margin.left/1.5+","+o.height/2+")").text(o.y_label);var l=function(){n.select(".x_axis").call(a),n.select(".y_axis").call(u),n.selectAll(".x_axis, .y_axis").selectAll("path, line").style("z-index",100).style("fill","none").style("stroke",o.stroke_color).style("stroke-width",o.stroke_width),n.selectAll(".x_axis, .y_axis").selectAll("text").style("font-family","sans-serif").attr("fill","rgb(50,50,50)"),n.selectAll(".x_axis").attr("transform","translate(0,"+(o.height+4)+")"),n.selectAll(".y_axis").attr("transform","translate(-4,0)"),e.update(o.pane_uuid)};if(o.grid&&(a.tickSize(-1*o.height),u.tickSize(-1*o.width)),o.zoom){var s=d3.behavior.zoom().x(r.x).y(r.y).scaleExtent(o.zoom_range).on("zoom",l);n.call(s),n.on("dblclick.zoom",null)}return l(),this.model=n,this}return n}),n("view/components/legend_area",["underscore","core/manager"],function(t){function e(e,n){var r={width:200,height:300,margin:{top:10,bottom:10,left:10,right:10},fill_color:"none",stroke_color:"#000",stroke_width:0};arguments.length>1&&t.extend(r,n);var i=e.append("g");return i.append("rect").attr("width",r.width).attr("height",r.height).attr("x",0).attr("y",0).attr("fill",r.fill_color).attr("stroke",r.stroke_color).attr("stroke-width",r.stroke_width),this.model=i,this.options=r,this.seek={x:r.margin.left,y:r.margin.top,width:0},this}return e.prototype.add=function(e){var n=this.model.append("g").attr("transform","translate("+this.seek.x+","+this.seek.y+")"),r=e.getDomObject();n[0][0].appendChild(r[0][0]),this.seek.y+e.height()>this.options.height?(this.seek.x+=this.seek.width,this.seek.y=this.options.margin.top):(this.seek.width=t.max([this.seek.width,e.width()]),this.seek.y+=e.height())},e}),n("view/components/tooltip",["underscore"],function(t){function e(e,n,r){var i={bg_color:"#333",stroke_color:"#000",stroke_width:1,text_color:"#fff",context_width:0,context_height:0,context_margin:{top:0,left:0,bottom:0,right:0},arrow_width:10,arrow_height:10,tooltip_margin:{top:2,left:5,bottom:2,right:5},font_size:"1em"};arguments.length>1&&t.extend(i,r);var o=e.append("g");return this.scales=n,this.options=i,this.lists=[],this.model=o,this}return e.prototype.add=function(e,n,r,i,o){var a=t.map(o,function(t,e){return String(e)+":"+String(t)});this.lists.push({id:e,x:n,y:r,pos:i,contents:a})},e.prototype.addToXAxis=function(t,e,n){if(arguments.length>2){var r=Math.pow(10,n);e=Math.round(e*r)/r}this.lists.push({id:t,x:e,y:"bottom",pos:"bottom",contents:String(e)})},e.prototype.addToYAxis=function(t,e,n){if(arguments.length>2){var r=Math.pow(10,n);e=Math.round(e*r)/r}this.lists.push({id:t,x:"left",y:e,pos:"right",contents:String(e)})},e.prototype.remove=function(e){this.lists=t.filter(this.lists,function(t){return t.id==e?!1:!0})},e.prototype.update=function(){var t=this.proceedData(this.lists),e=this.model.selectAll("g").data(t);this.updateModels(e)},e.prototype.updateModels=function(e){e.exit().remove();this.options;!function(e,n){var r=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear");e.append("path").attr("d",function(t){return r(t.shape)}).attr("stroke",n.stroke_color).attr("fill",n.bg_color),e.each(function(){t.isArray(this.__data__.text)||d3.select(this).append("text").text(function(t){return t.text}).attr("x",function(t){return t.text_x}).attr("y",function(t){return t.text_y}).attr("text-anchor","middle").attr("fill","#ffffff").attr("font-size",n.font_size)}),e.attr("transform",function(t){return"translate("+t.tip_x+","+t.tip_y+")"})}(e.enter().append("g"),this.options)},e.prototype.proceedData=function(e){var n=this.options,r=function(e,r,i){var o=n.arrow_width,a=n.arrow_height,u=r,l=i,s={top:[{x:0,y:0},{x:o/2,y:-a},{x:u/2,y:-a},{x:u/2,y:-a-l},{x:-u/2,y:-a-l},{x:-u/2,y:-a},{x:-o/2,y:-a},{x:0,y:0}],right:[{x:0,y:0},{x:-o,y:-a/2},{x:-o,y:-l/2},{x:-o-u,y:-l/2},{x:-o-u,y:l/2},{x:-o,y:l/2},{x:-o,y:a/2},{x:0,y:0}]};s.bottom=t.map(s.top,function(t){return{x:t.x,y:-t.y}}),s.left=t.map(s.right,function(t){return{x:-t.x,y:t.y}});var c=function(t){var n={};switch(e){case"top":case"bottom":n={x:0,y:(t[2].y+t[3].y)/2};break;case"right":case"left":n={x:(t[2].x+t[3].x)/2,y:0}}return n}(s[e]);return{shape:s[e],text:c}},i=this.options.tooltip_margin,o=this.options.context_height,a=this.scales,u=this.model,l=function(t,e){var n=u.append("text").text(t).attr("font-size",e),r=n[0][0].getBBox().width,i=n[0][0].getBBox().height;return n.remove(),{w:r,h:i}};return t.map(e,function(e){var u=t.isArray(e.contents)?e.contents.length:1,s=t.isArray(e.contents)?t.max(e.contents,function(t){return t.length}):e.contents,c=l(s,n.font_size),d=c.w+i.left+i.right,f=(c.h+i.top+i.bottom)*u,p="left"==e.x?0:a.x(e.x),h="bottom"==e.y?o:a.y(e.y),g=r(e.pos,d,f);return{shape:g.shape,tip_x:p,tip_y:h,text_x:g.text.x,text_y:g.text.y+c.h/2,text:e.contents}})},e}),n("view/pane",["underscore","node-uuid","view/diagrams/diagrams","view/components/axis","view/components/filter","view/components/legend_area","view/components/tooltip"],function(t,e,n,r,i,o,a){function u(n,i){var u={width:700,height:500,margin:{top:30,bottom:80,left:80,right:30},xrange:[0,0],yrange:[0,0],x_label:"X",y_label:"Y",zoom:!1,grid:!0,zoom_range:[.5,5],bg_color:"#eee",grid_color:"#fff",legend:!1,legend_position:"right",legend_width:150,legend_height:300,legend_stroke_color:"#000",legend_stroke_width:0};arguments.length>1&&t.extend(u,i),this.uuid=e.v4();var l=n.append("svg").attr("width",u.width).attr("height",u.height),s=function(){var e={};if(e.plot_x=u.margin.left,e.plot_y=u.margin.top,e.plot_width=u.width-u.margin.left-u.margin.right,e.plot_height=u.height-u.margin.top-u.margin.bottom,u.legend)switch(u.legend_position){case"top":e.plot_width-=u.legend_width,e.plot_y+=u.legend_height,e.legend_x=(u.width-u.legend_width)/2,e.legend_y=u.margin.top;break;case"bottom":e.plot_height-=u.legend_height,e.legend_x=(u.width-u.legend_width)/2,e.legend_y=u.margin.top+u.height;break;case"left":e.plot_x+=u.legend_width,e.plot_width-=u.legend_width,e.legend_x=u.margin.left,e.legend_y=u.margin.top;break;case"right":e.plot_width-=u.legend_width,e.legend_x=e.plot_width+u.margin.left,e.legend_y=u.margin.top;break;case t.isArray(u.legend_position):e.legend_x=u.width*u.legend_position[0],e.legend_y=u.height*u.legend_position[1]}return e}(),c=function(){var e={x:[0,s.plot_width],y:[s.plot_height,0]},n={};return t.each({x:"xrange",y:"yrange"},function(r,i){n[i]=u[r].length>2||t.any(u[r],function(t){return!isFinite(t)})?d3.scale.ordinal().domain(u[r]).rangeBands(e[i]):d3.scale.linear().domain(u[r]).range(e[i])}),n}();l.append("g").attr("transform","translate("+s.plot_x+","+s.plot_y+")").append("rect").attr("x",0).attr("y",0).attr("width",s.plot_width).attr("height",s.plot_height).attr("stroke","#000000").attr("stroke_width",2).attr("fill",u.bg_color).style("z-index",1);new r(l.select("g"),c,{width:s.plot_width,height:s.plot_height,margin:u.margin,grid:u.grid,zoom:u.zoom,zoom_range:u.zoom_range,x_label:u.x_label,y_label:u.y_label,stroke_color:u.grid_color,pane_uuid:this.uuid});l.select("g").append("g").attr("class","context").append("clipPath").attr("id",this.uuid+"clip_context").append("rect").attr("x",0).attr("y",0).attr("width",s.plot_width).attr("height",s.plot_height);var d=new a(l.select("g"),c,{context_width:s.plot_width,context_height:s.plot_height,context_margin:{top:s.plot_x,left:s.plot_y,bottom:u.margin.bottom,right:u.margin.right}});return u.legend&&(l.append("g").attr("class","legend_area").attr("transform","translate("+s.legend_x+","+s.legend_y+")"),this.legend_area=new o(l.select(".legend_area"),{width:u.legend_width,height:u.legend_height,stroke_color:u.legend_stroke_color,stroke_width:u.legend_stroke_width})),this.diagrams=[],this.tooltip=d,this.context=l.select(".context"),this.scales=c,this.options=u,this.filter=null,this}return u.prototype.addDiagram=function(r,i,o){t.extend(o,{uuid:e.v4(),tooltip:this.tooltip,clip_id:this.uuid+"clip_context"});var a=new n[r](this.context,this.scales,i,o);if(this.options.legend){var u=this.legend_area,l=a.getLegend();t.isArray(l)?t.each(l,function(t){u.add(t)}):this.legend_area.add(l)}this.diagrams.push(a)},u.prototype.addFilter=function(e,n){var r=this.diagrams,o=function(e){t.each(r,function(t){t.checkSelectedData(e)})};this.filter=new i(this.context,this.scales,o,n)},u.prototype.update=function(){t.each(this.diagrams,function(t){t.update()})},u}),n("utils/dataframe",["underscore"],function(t){function e(t,e){if(e instanceof String&&/url(.+)/g.test(e)){var n=e.match(/url\((.+)\)/)[1],r=this;d3.json(n,function(t,e){r.raw=JSON.parse(e)}),this.raw={}}else this.raw=e;return this.filters={},this}return e.prototype.row=function(t){return this.raw[t]},e.prototype.column=function(e){var n=[],r=this.raw;return t.each(r,function(t){n.push(t[e])}),n},e.prototype.addFilter=function(t,e,n){this.filters[t]={func:e,excepts:n}},e.prototype.columnWithFilters=function(e,n){var r=this.raw.concat();return t.each(this.filters,function(n,i){(-1==n.excepts.indexOf("self")||i!=e)&&(e in n.excepts||(r=t.filter(r,n.func)))}),t.map(r,function(t){return t[n]})},e.prototype.pickUpCells=function(e,n){var r=this.column(e);return t.map(n,function(t){return r[t]})},e.prototype.columnRange=function(t){var e=this.column(t);return{max:d3.max(e,function(t){return t}),min:d3.min(e,function(t){return t})}},e}),n("core/parse",["underscore","core/manager","core/extension","view/pane","utils/dataframe"],function(t,e,n,r,i){function o(e,r){var i=d3.select(r);"undefined"!=typeof e.extension&&(t.isArray(e.extension)?t.each(e.extension,function(t){n.load(t)}):n.load(e.extension)),a(e,i)}function a(o,a){t.each(o.data,function(t,n){e.addData(n,new i(n,t))}),t.each(o.panes,function(i){var o;if("undefined"!=typeof i.extension){var u=n.pane(i.extension);o=new u(a,i.options)}else o=new r(a,i.options);var l=[];if(t.each(i.diagrams,function(t){o.addDiagram(t.type,t.data,t.options||{}),l.push(t.data)}),void 0!==i.filter){var s=i.filter;o.addFilter(s.type,s.options||{})}e.addPane({pane:o,data:l,uuid:o.uuid}),e.update(o.uuid)})}return o}),n("main",["require","exports","module","core/parse","core/manager","node-uuid"],function(t){var e={};return e.core={},e.core.parse=t("core/parse"),e.Manager=t("core/manager"),e.uuid=t("node-uuid"),e}),e("main")});